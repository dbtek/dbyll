I"î9<p><br /><br /></p>

<h1 id="ìŠ¤í”„ë§ë¶€íŠ¸ë¡œ-ì¼ì¼-í™•ì§„ì-ê·¸ë˜í”„-ë§Œë“¤ê¸°-02"><center>ìŠ¤í”„ë§ë¶€íŠ¸ë¡œ ì¼ì¼ í™•ì§„ì ê·¸ë˜í”„ ë§Œë“¤ê¸°-02</center></h1>

<p><br /><br /></p>

<p>ì €ë²ˆ ê²Œì‹œë¬¼ì—ì„œëŠ” csv íŒŒì¼ì„ íŒŒì‹±í•´ì„œ Highchartì˜ line graphë¡œ í‘œì‹œí•˜ëŠ” ê²ƒì„ í•´ë´¤ë‹¤. ì´ë²ˆ ê²Œì‹œë¬¼ì—ì„œëŠ” csvë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìš°ë¦¬ ë‚˜ë¼ ê³µê³µ ë°ì´í„° ì‚¬ì´íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” APIë¥¼ ì‚¬ìš©í•´ì„œ Highchartì™€ ì—°ë™ì„ í•´ë³´ë ¤ í•œë‹¤. ìš°ì„  ê³µê³µë°ì´í„° í¬íƒˆ ì‚¬ì´íŠ¸ì— ì ‘ì†í•´ì„œ ì•Œë§ì€ ë°ì´í„°ë¥¼ ì°¾ëŠ”ë‹¤.</p>

<p><strong><a href="https://www.data.go.kr/">ê³µê³µë°ì´í„°í¬í„¸</a></strong></p>

<p><img src="/images/SpringBoot/highchart-public-API/2021-03-01-14-00-02.png" alt="" /></p>

<p><br /></p>

<p>íšŒì›ê°€ì…ì„ í•˜ê³  ë¡œê·¸ì¸ í›„ ì—¬ê¸°ì„œ ê²€ìƒ‰ì°½ì— ì½”ë¡œë‚˜ë¼ê³  ê²€ìƒ‰í•œë‹¤. ê²€ìƒ‰í•´ì„œ ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ë‹¤ë³´ë©´ <strong>ì˜¤í”ˆ API</strong>ë¼ê³  í•­ëª©ì´ ë³´ì´ë©° ê·¸ ëª©ë¡ ì¤‘ì— <strong>ë³´ê±´ë³µì§€ë¶€<em>ì½”ë¡œë‚˜19 ê°ì—¼</em>í˜„í™©</strong>ì´ë¼ê³  ë˜ì–´ ìˆëŠ” ë¶€ë¶„ì´ ìˆë‹¤. ê·¸ê²ƒì„ í´ë¦­í•œë‹¤.</p>

<p><img src="/images/SpringBoot/highchart-public-API/2021-03-01-14-03-48.png" alt="" /></p>

<p><br /></p>

<p>ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ ì•„ë˜ ì‚¬ì§„ì—ì„œ ì˜¤ë¥¸ìª½ì— í™œìš©ì‹ ì²­ ë²„íŠ¼ì´ ìˆë‹¤. ê·¸ê²ƒì„ ëˆ„ë¥´ì.</p>

<p><img src="/images/SpringBoot/highchart-public-API/2021-03-01-14-04-42.png" alt="" /></p>

<p><br /></p>

<p>ëˆŒëŸ¬ì„œ ìŠ¹ì¸ì„ ë°›ê²Œë˜ë©´ ì¼ë°˜ ì¸ì¦í‚¤ë¥¼ ë°œê¸‰í•´ ì¤€ë‹¤. ì´ê²ƒì´ ë°”ë¡œ ì„œë¹„ìŠ¤ í‚¤ì´ë‹¤. ì´ í‚¤ë¥¼ ì˜ ë³´ê´€í•´ ë‘”ë‹¤. ì´ ì„œë¹„ìŠ¤í‚¤ëŠ” ë‚˜ì¤‘ì— ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ ì“°ê²Œ ëœë‹¤. ì ì´ì œ ì¸í…”ë¦¬ì œì´ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ ë³´ì.</p>

<p><img src="/images/SpringBoot/highchart-public-API/2021-03-01-14-21-57.png" alt="" /></p>

<p><br /></p>

<p>ì˜ì¡´ì„±ìœ¼ë¡œëŠ”</p>

<ul>
  <li>Thymeleaf</li>
  <li>Spring Boot DevTools</li>
  <li>Lombok</li>
  <li>Spring Web</li>
</ul>

<p>ì„ ì„¤ì •í•œë‹¤.</p>

<p><img src="/images/SpringBoot/highchart-public-API/2021-03-01-14-22-30.png" alt="" /></p>

<p><br /></p>

<p>ì´ì œ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ íŒ¨í‚¤ì§€ì™€ ìë°” íŒŒì¼ì„ ë§Œë“ ë‹¤.</p>

<p><img src="/images/SpringBoot/highchart-public-API/2021-03-01-14-25-16.png" alt="" /></p>

<p><br /></p>

<p>ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ì „ì— ì´ APIë¥¼ ì¢€ ë” ìì„¸íˆ ì‚´í´ë³´ì. ë‹¤ì‹œ ìš°ë¦¬ê°€ í´ë¦­í–ˆë˜ <strong>ë³´ê±´ë³µì§€ë¶€<em>ì½”ë¡œë‚˜19 ê°ì—¼</em>í˜„í™©</strong>ì— ë“¤ì–´ê°€ì„œ ìŠ¤í¬ë¡¤ì„ ì œì¼ ì•„ë˜ê¹Œì§€ ë‚´ë¦¬ë©´ ê° í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë³„ë¡œ ìƒ˜í”Œ ì½”ë“œë¥¼ ë³¼ ìˆ˜ê°€ ìˆë‹¤.</p>

<p><img src="/images/SpringBoot/highchart-public-API/2021-03-01-14-26-28.png" alt="" /></p>

<p><br /></p>

<p>ìš°ë¦¬ê°€ ì‚´í´ë³¼ ì–¸ì–´ëŠ” Java ì´ë¯€ë¡œ í´ë¦­í•´ì„œ ë³µì‚¬í•˜ê³  ìš°ë¦¬ê°€ ìƒì„±í•œ ìë°” íŒŒì¼ì— ë¶™ì—¬ë„£ê¸°ë¥¼ í•´ì¤€ë‹¤. ë¶™ì—¬ë„£ê¸° í•  ë•ŒëŠ” í´ë˜ìŠ¤ ì´ë¦„ì„ ë³€ê²½í•´ì¤€ë‹¤.</p>

<p><strong>CoronaVirusDataService.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.public_api_highcahrt.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URLEncoder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CoronaVirusDataService</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">StringBuilder</span> <span class="n">urlBuilder</span> <span class="o">=</span>
        <span class="k">new</span> <span class="nf">StringBuilder</span><span class="o">(</span><span class="s">"http://openapi.data.go.kr/openapi/service/"</span><span class="o">+</span>
        <span class="s">"rest/Covid19/getCovid19InfStateJson"</span><span class="o">);</span> <span class="cm">/*URL*/</span>
        <span class="cm">/*Service Key*/</span>
        <span class="n">urlBuilder</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"?"</span> <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"ServiceKey"</span><span class="o">,</span><span class="s">"UTF-8"</span><span class="o">)</span> <span class="o">+</span>
        <span class="s">"=P1wWeheZvhyl1CtYk8BFcVLbUl2Z"</span><span class="o">+</span>
        <span class="s">"JdoRsu1COpnHeAFmIaLOdBHSmEh1EDLZI~~~~~~~~"</span><span class="o">);</span>
       <span class="cm">/*ê³µê³µë°ì´í„°í¬í„¸ì—ì„œ ë°›ì€ ì¸ì¦í‚¤*/</span>
        <span class="n">urlBuilder</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"&amp;"</span> <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"ServiceKey"</span><span class="o">,</span><span class="s">"UTF-8"</span><span class="o">)</span> <span class="o">+</span> <span class="s">"="</span> <span class="o">+</span>
        <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"P1wWeheZvhyl1CtYk8BFcVLbUl2ZJ"</span><span class="o">+</span><span class="s">"
        doRsu1COpnHeAFmIaLOdBHSmEh1EDLZI~~~~~~~~"</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">));</span>

        <span class="n">urlBuilder</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"&amp;"</span> <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"pageNo"</span><span class="o">,</span><span class="s">"UTF-8"</span><span class="o">)</span> <span class="o">+</span> <span class="s">"="</span>
        <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"1"</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">));</span> <span class="cm">/*í˜ì´ì§€ë²ˆí˜¸*/</span>
        <span class="n">urlBuilder</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"&amp;"</span> <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"numOfRows"</span><span class="o">,</span><span class="s">"UTF-8"</span><span class="o">)</span> <span class="o">+</span> <span class="s">"="</span>
        <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"10"</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">));</span> <span class="cm">/*í•œ í˜ì´ì§€ ê²°ê³¼ ìˆ˜*/</span>
        <span class="n">urlBuilder</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"&amp;"</span> <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"startCreateDt"</span><span class="o">,</span><span class="s">"UTF-8"</span><span class="o">)</span> <span class="o">+</span> <span class="s">"="</span>
        <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"20200310"</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">));</span> <span class="cm">/*ê²€ìƒ‰í•  ìƒì„±ì¼ ë²”ìœ„ì˜ ì‹œì‘*/</span>
        <span class="n">urlBuilder</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"&amp;"</span> <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"endCreateDt"</span><span class="o">,</span><span class="s">"UTF-8"</span><span class="o">)</span> <span class="o">+</span> <span class="s">"="</span>
        <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"20200315"</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">));</span> <span class="cm">/*ê²€ìƒ‰í•  ìƒì„±ì¼ ë²”ìœ„ì˜ ì¢…ë£Œ*/</span>


        <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">urlBuilder</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
        <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
        <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response code: "</span> <span class="o">+</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">());</span>
        <span class="nc">BufferedReader</span> <span class="n">rd</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="mi">300</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">rd</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">rd</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
        <span class="o">}</span>
        <span class="nc">StringBuilder</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">rd</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="n">conn</span><span class="o">.</span><span class="na">disconnect</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê²ƒì€ ì•„ê¹Œ ìš°ë¦¬ê°€ ë°œê¸‰ë°›ì€ ì¸ì¦í‚¤ë¥¼ ë„£ì–´ì¤˜ì•¼ í•œë‹¤. ì´ 2êµ°ëŒ€ë¥¼ ë„£ì–´ì¤˜ì•¼ í•˜ëŠ”ë° ë°”ë¡œ line 17ê³¼ line 22 ë¶€ë¶„ì´ë‹¤. ê·¸ëŸ°ë° line 17ì— ë„£ì„ ë• ì• ë¬¸ìì—´ â€˜=â€™ë¥¼ ì¶”ê°€í•œì²´ë¡œ ì•ì—ë‹¤ê°€ ì´ì–´ì„œ ë„£ì–´ì¤€ë‹¤. ì§€ê¸ˆ ë‚´ê°€ ì ì€ ì½”ë“œë¥¼ ë³´ë©´ ì“¸ë°ì—†ì´ ê¸´ ì¸ì¦í‚¤ë¥¼ ë¶„í•´í•´ì„œ â€œâ€+â€â€ ì‹ìœ¼ë¡œ ì´ì–´ ë¶™ì´ê³  ìˆëŠ”ë° ì´ëŠ” ì‹¤ì œë¡œëŠ” ë¶ˆí•„ìš”í•˜ë©° ë‚´ê°€ í•˜ëŠ” ì´ìœ ëŠ” ì½”ë“œì˜ í•œ ì¤„ ê¸¸ì´ê°€ ê¸¸ì–´ì§€ë©´ ì´ ì½”ë“œ ë¸”ëŸ­ì—ì„œ ì—ëŸ¬ê°€ ë‚˜ê¸° ë•Œë¬¸ì— ì¼ë¶€ë¡œ ì¤„ ê¸¸ì´ë¥¼ ì§§ê²Œ ë§Œë“¤ê¸° ìœ„í•¨ì´ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë‚˜ì²˜ëŸ¼ ë¶„í•´í•˜ì§€ ì•Šê³  ê·¸ëƒ¥ ë¶™ì—¬ë„£ê¸° í•˜ë©´ ëœë‹¤.
ì½”ë“œë¥¼ ì •ìƒì ìœ¼ë¡œ ë¶™ì—¬ë„£ê¸° í–ˆìœ¼ë©´ ì½”ë“œ ë°”ë¡œ ì™¼ìª½ì˜ ì´ˆë¡ìƒ‰ í”Œë ˆì´ ë²„íŠ¼ì„ ëˆŒëŸ¬ì„œ ì‹¤í–‰ì‹œì¼œë³¸ë‹¤. (ë‘˜ ì¤‘ì— ì–´ëŠ ê²ƒì„ ëˆŒëŸ¬ë„ ê²°ê³¼ëŠ” ë˜‘ê°™ë‹¤.)</p>

<p><img src="/images/SpringBoot/highchart-public-API/2021-03-01-14-31-58.png" alt="" /></p>

<p><br /></p>

:ET