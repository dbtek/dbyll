I"ıD<p><br /><br />
<br /><br /></p>
<h1 id="intellij-í”„ë¡œì íŠ¸-ìƒì„±"><center>Intellij í”„ë¡œì íŠ¸ ìƒì„±</center></h1>
<p><br /><br /></p>

<p>ì´ì œ ì¸í…”ë¦¬ì œì´ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ ë³´ì.</p>

<p>new Projectë¥¼ ëˆŒëŸ¬ì„œ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“ ë‹¤.</p>

<p><img src="..\..\..\..\images\Program\post-5\newProject.PNG" alt="new project" />
<br /></p>

<ul>
  <li>Group -&gt; com.young.s3</li>
  <li>Artifact -&gt; s3test.</li>
  <li>Type -&gt; Gradle</li>
  <li>Language -&gt; Java</li>
  <li>Packaging -&gt; War</li>
</ul>

<p>ì´ë ‡ê²Œ ì„¤ì •í•˜ê³  Nextë¥¼ ëˆ„ë¥¸ë‹¤.</p>

<p><img src="..\..\..\..\images\Program\post-5\newProjectName.PNG" alt="new project name" />
<br /></p>

<h4 id="dependencies">Dependencies</h4>
<ul>
  <li>SpringBoot DevTools</li>
  <li>Lombok</li>
  <li>Spring Web</li>
  <li>Thymeleaf</li>
  <li>Spring Data JPA</li>
</ul>

<p>ì´ë ‡ê²Œ ì„¤ì •í•˜ê³  Nextë¥¼ ëˆ„ë¥¸ë‹¤.</p>

<p><img src="..\..\..\..\images\Program\post-5\newProjectGradle.PNG" alt="new project dependency" />
<br /></p>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ Finishë¥¼ ëˆ„ë¥¸ë‹¤.</p>

<p><img src="..\..\..\..\images\Program\post-5\newProjectFinish.PNG" alt="new project dependency" />
<br /></p>

<hr />

<h3 id="buildgradle-ì„¤ì •í•˜ê¸°">build.gradle ì„¤ì •í•˜ê¸°</h3>

<p>ì£¼ì„ìœ¼ë¡œ ì¨ì§„ ë¶€ë¶„ì„ ë³´ë©´ mysqlë¥¼ ì“°ê¸° ìœ„í•´ ë„£ì–´ì¤€ ì½”ë“œì™€ AWS S3ë¥¼ ì“°ê¸° ìœ„í•´ì„œ ì½”ë“œë¥¼ ì¨ë†“ëŠ”ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">plugins</span> <span class="o">{</span>
    <span class="n">id</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="err">'</span> <span class="n">version</span> <span class="err">'</span><span class="mf">2.4</span><span class="o">.</span><span class="mi">2</span><span class="err">'</span>
    <span class="n">id</span> <span class="err">'</span><span class="n">io</span><span class="o">.</span><span class="na">spring</span><span class="o">.</span><span class="na">dependency</span><span class="o">-</span><span class="n">management</span><span class="err">'</span> <span class="n">version</span> <span class="err">'</span><span class="mf">1.0</span><span class="o">.</span><span class="mi">11</span><span class="o">.</span><span class="na">RELEASE</span><span class="err">'</span>
    <span class="n">id</span> <span class="err">'</span><span class="n">java</span><span class="err">'</span>
<span class="o">}</span>

<span class="n">group</span> <span class="o">=</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">young</span><span class="o">.</span><span class="na">s3</span><span class="err">'</span>
<span class="n">version</span> <span class="o">=</span> <span class="err">'</span><span class="mf">0.0</span><span class="o">.</span><span class="mi">1</span><span class="o">-</span><span class="no">SNAPSHOT</span><span class="err">'</span>
<span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="err">'</span><span class="mi">15</span><span class="err">'</span>

<span class="n">configurations</span> <span class="o">{</span>
    <span class="n">compileOnly</span> <span class="o">{</span>
        <span class="n">extendsFrom</span> <span class="n">annotationProcessor</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">repositories</span> <span class="o">{</span>
    <span class="n">mavenCentral</span><span class="o">()</span>
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">data</span><span class="o">-</span><span class="n">jpa</span><span class="err">'</span>
    <span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">thymeleaf</span><span class="err">'</span>
    <span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">web</span><span class="err">'</span>
    <span class="n">runtimeOnly</span> <span class="err">'</span><span class="nl">mysql:</span><span class="n">mysql</span><span class="o">-</span><span class="n">connector</span><span class="o">-</span><span class="n">java</span><span class="err">'</span>
    <span class="n">compileOnly</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">projectlombok</span><span class="o">:</span><span class="n">lombok</span><span class="err">'</span>
    <span class="n">annotationProcessor</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">projectlombok</span><span class="o">:</span><span class="n">lombok</span><span class="err">'</span>
    <span class="c1">//mysql</span>
    <span class="n">compile</span> <span class="nl">group:</span> <span class="err">'</span><span class="n">mysql</span><span class="err">'</span><span class="o">,</span> <span class="nl">name:</span> <span class="err">'</span><span class="n">mysql</span><span class="o">-</span><span class="n">connector</span><span class="o">-</span><span class="n">java</span><span class="err">'</span><span class="o">,</span> <span class="nl">version:</span> <span class="err">'</span><span class="mf">8.0</span><span class="o">.</span><span class="mi">22</span><span class="err">'</span>
    <span class="n">testImplementation</span> <span class="o">(</span><span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">test</span><span class="err">'</span><span class="o">){</span>
        <span class="n">exclude</span> <span class="nl">group:</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">vintage</span><span class="err">'</span><span class="o">,</span> <span class="nl">module:</span> <span class="err">'</span><span class="n">junit</span><span class="o">-</span><span class="n">vintage</span><span class="o">-</span><span class="n">engine</span><span class="err">'</span>
    <span class="o">}</span>
    <span class="c1">// AWS S3</span>
    <span class="n">implementation</span> <span class="nl">group:</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">cloud</span><span class="err">'</span><span class="o">,</span> <span class="nl">name:</span> <span class="err">'</span><span class="n">spring</span><span class="o">-</span><span class="n">cloud</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">aws</span><span class="err">'</span><span class="o">,</span> <span class="nl">version:</span> <span class="err">'</span><span class="mf">2.2</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="na">RELEASE</span><span class="err">'</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="applicationproperties-ì„¤ì •">application.properties ì„¤ì •</h3>

<ul>
  <li>ì—”ë“œí¬ì¸íŠ¸: ë³¸ì¸ì˜ ì—”ë“œí¬ì¸íŠ¸</li>
  <li>ê³„ì •ëª…: rds ì¸ìŠ¤í„´ìŠ¤ ë§Œë“¤ì—ˆì„ ë•Œ ì…ë ¥í–ˆë˜ ë§ˆìŠ¤í„° ì‚¬ìš©ì ì´ë¦„</li>
  <li>ë¹„ë²ˆ: rds ì¸ìŠ¤í„´ìŠ¤ ë§Œë“¤ì—ˆì„ ë•Œ ì…ë ¥í–ˆë˜ ë§ˆìŠ¤í„° ì•”í˜¸</li>
  <li>ë””ë¹„ëª…: ì•„ë˜ ê·¸ë¦¼ ì°¸ê³ </li>
</ul>

<p>ì•„ë˜ 3ì¤„ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í–ˆì„ ë•Œ ì‹¤ì œ ì¸í…”ë¦¬ì œì´ì—ì„œ ì‹¤í–‰í•˜ëŠ” queryë¥¼ í‘œì‹œí•´ ì¤€ë‹¤.</p>

<p>ë””ë¹„ëª…ì€ ì´ ê·¸ë¦¼ê³¼ ê°™ì´ mysql workbenchì—ì„œ SCHEMASì—ì„œ ë§Œë“  ë°ì´í„°ë² ì´ìŠ¤ ëª…ìœ¼ë¡œ í•œë‹¤.
![dbName]](........\images\Program\post-5\dbName.PNG)
<br /></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">spring</span><span class="o">.</span><span class="na">datasource</span><span class="o">.</span><span class="na">driver</span><span class="o">-</span><span class="kd">class</span><span class="err">-</span><span class="nc">name</span><span class="o">=</span><span class="n">com</span><span class="o">.</span><span class="na">mysql</span><span class="o">.</span><span class="na">cj</span><span class="o">.</span><span class="na">jdbc</span><span class="o">.</span><span class="na">Driver</span>
<span class="n">spring</span><span class="o">.</span><span class="na">datasource</span><span class="o">.</span><span class="na">url</span><span class="o">=</span><span class="nl">jdbc:mysql:</span><span class="c1">//ì—”ë“œí¬ì¸íŠ¸:3306/ë””ë¹„ëª…?serverTimezone=UTC&amp;characterEncoding=UTF-8</span>
<span class="n">spring</span><span class="o">.</span><span class="na">datasource</span><span class="o">.</span><span class="na">username</span><span class="o">=</span><span class="n">ê³„ì •ëª…</span>
<span class="n">spring</span><span class="o">.</span><span class="na">datasource</span><span class="o">.</span><span class="na">password</span><span class="o">=</span><span class="n">ë¹„ë²ˆ</span>

<span class="n">spring</span><span class="o">.</span><span class="na">jpa</span><span class="o">.</span><span class="na">hibernate</span><span class="o">.</span><span class="na">ddl</span><span class="o">-</span><span class="n">auto</span><span class="o">=</span><span class="n">update</span>
<span class="n">spring</span><span class="o">.</span><span class="na">jpa</span><span class="o">.</span><span class="na">properties</span><span class="o">.</span><span class="na">hibernate</span><span class="o">.</span><span class="na">format_sql</span><span class="o">=</span><span class="kc">true</span>
<span class="n">spring</span><span class="o">.</span><span class="na">jpa</span><span class="o">.</span><span class="na">show</span><span class="o">-</span><span class="n">sql</span><span class="o">=</span><span class="kc">true</span>
</code></pre></div></div>
<p>ì´ì „ì— ë§Œë“  rdsì—ì„œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ëŠ”ë‹¤.
<img src="..\..\..\..\images\Program\post-5\endpoint.PNG" alt="endPoint" />
<br /></p>

<h3 id="intellij-database-ì„¤ì •">Intellij Database ì„¤ì •</h3>
<p>ctrl+shift+aë¥¼ ëˆ„ë¥´ê²Œ ë˜ë©´ searchë¥¼ í•  ìˆ˜ê°€ ìˆëŠ”ë°
ì—¬ê¸°ì„œ databaseë¥¼ ì…ë ¥í•˜ê³  ëˆ„ë¥¸ë‹¤.</p>

<p><img src="..\..\..\..\images\Program\post-5\search.png" alt="search" />
<br /></p>

<p>ê·¸ ë‹¤ìŒì— í”ŒëŸ¬ìŠ¤ ë²„íŠ¼ì„ datasourceë¥¼ ì„ íƒí•˜ê³  mysqlëˆ„ë¥´ê³  ìƒì„±ì„ í•œë‹¤.</p>

<p><img src="..\..\..\..\images\Program\post-5\datasource.PNG" alt="datasource" />
<br /></p>

<p>í•˜ë‚˜ì˜ ì°½ì´ ëœ¨ê²Œ ëœë‹¤.</p>

<ul>
  <li>Name: ì´ë¦„</li>
  <li>Host: ì—”ë“œí¬ì¸íŠ¸</li>
  <li>User: ë§ˆìŠ¤í„° ì‚¬ìš©ì ì´ë¦„</li>
  <li>Password: ë§ˆìŠ¤í„° ì‚¬ìš©ì ì•”í˜¸</li>
</ul>

<p>ì´ë ‡ê²Œ ì“°ê³  Test Connectionë¥¼ ëˆ„ë¥´ê²Œ ë˜ë©´ ì €ë ‡ê²Œ ì´ˆë¡ìƒ‰ ì²´í¬ í‘œì‹œê°€ ë‚˜ì˜¨ë‹¤.
ì´ì œ OKë¥¼ ëˆ„ë¥´ê³  ìƒì„±ì„ í•˜ë©´ ëœë‹¤.</p>

<p><img src="..\..\..\..\images\Program\post-5\create.PNG" alt="create" />
<br /></p>

<hr />

<h3 id="í”„ë¡œì íŠ¸-êµ¬ì„±">í”„ë¡œì íŠ¸ êµ¬ì„±</h3>

<p>í”„ë¡œì íŠ¸ êµ¬ì„±ì€ ì´ëŸ° ì‹ìœ¼ë¡œ êµ¬ì„±í•œë‹¤.</p>

<p><img src="..\..\..\..\images\Program\post-5\project.PNG" alt="project_structure" />
<br /></p>

<p>ë¨¼ì € ë°ì´í„°ë² ì´ìŠ¤ê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ domain/entity ì•„ë˜ GalleryEntity ì½”ë“œë¥¼ ë¨¼ì € ì‘ì„±í•œë‹¤.</p>

<p><strong>ì—¬ê¸°ì„œ @Table(name=â€galleryâ€) ë¶€ë¶„ì—ì„œ ë¹¨ê°„ì¤„ì´ ë‚˜ì™€ë„ ê´œì°®ë‹¤.</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.young.s3.s3test.domain.entity</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.persistence.*</span><span class="o">;</span>

<span class="nd">@AllArgsConstructor</span>
<span class="nd">@NoArgsConstructor</span><span class="o">(</span><span class="n">access</span> <span class="o">=</span> <span class="nc">AccessLevel</span><span class="o">.</span><span class="na">PROTECTED</span><span class="o">)</span>
<span class="nd">@Getter</span>
<span class="nd">@ToString</span>
<span class="nd">@Builder</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"gallery"</span><span class="o">)</span>
<span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GalleryEntity</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span><span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">length</span> <span class="o">=</span> <span class="mi">50</span><span class="o">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">length</span> <span class="o">=</span> <span class="mi">50</span><span class="o">,</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">phoneNum</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">columnDefinition</span> <span class="o">=</span> <span class="s">"TEXT"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">filePath</span><span class="o">;</span>

<span class="o">}</span>
</code></pre></div></div>
<p>ê·¸ë¦¬ê³  JPA ì‚¬ìš©ì„ ìœ„í•´ì„œ GalleryRepository ì¸í„°í˜ì´ìŠ¤ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.young.s3.s3test.domain.repository</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.young.s3.s3test.domain.entity.GalleryEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GalleryRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">GalleryEntity</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>
<p><strong>ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹œì‘í•´ë³´ì</strong></p>

<p>ì´ë ‡ê²Œ gallery í…Œì´ë¸”ì´ ë§Œë“¤ì–´ì§„ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><img src="..\..\..\..\images\Program\post-5\schema.PNG" alt="schema" />
<br /></p>

<p>ê·¸ë¦¬ê³  ë‹¤ì‹œ ì˜¤ë¥¸ìª½ì— Database ì°½ì— ê°€ì„œ rds-test ì˜†ì— 1of5ë¼ê³  ë˜ì–´ ìˆëŠ” ê²ƒì„ í´ë¦­í•´ ë³¸ë‹¤.</p>

<p><img src="..\..\..\..\images\Program\post-5\1of5.PNG" alt="1of5" />
<br /></p>

<p>ê·¸ëŸ¬ë‹¤ ë³´ë©´ ìŠ¤í‚¤ë§ˆ ë¦¬ìŠ¤íŠ¸ê°€ ë‚˜ì˜¤ëŠ”ë° ì—¬ê¸°ì„œ ìì‹ ì´ ë§Œë“  ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„, ì—¬ê¸°ì„  rds_testë¥¼ ì²´í¬í•œë‹¤.</p>

<p><img src="..\..\..\..\images\Program\post-5\check.PNG" alt="check" />
<br /></p>

<p>ì²´í¬í•˜ê³  ë‚˜ë©´ ë°©ê¸ˆ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•´ì„œ ë§Œë“  í•„ë“œë“¤ì´ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><img src="..\..\..\..\images\Program\post-5\checkok.PNG" alt="checkok" />
<br />
ë‹¤ìŒ ê²Œì‹œë¬¼ì—ì„œëŠ” ì¸í…”ë¦¬ì œì´ì—ì„œ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ê³  ì‹¤ì§ˆì ìœ¼ë¡œ ì´ì „ ê²Œì‹œë¬¼ì—ì„œ ìƒì„±í•œ RDSì™€ S3ë¥¼ ì—°ë™í•´ë³´ë„ë¡ í•˜ê² ë‹¤.</p>

<hr />

<h4 id="ë‹¤ìŒ-ê²Œì‹œë¬¼ì—ì„œëŠ”-ì´ì œ-s3ë¥¼-ì—°ë™í•˜ê³ -ë§ˆë¬´ë¦¬ë¥¼-í•´ë³´ì">ë‹¤ìŒ ê²Œì‹œë¬¼ì—ì„œëŠ” ì´ì œ S3ë¥¼ ì—°ë™í•˜ê³  ë§ˆë¬´ë¦¬ë¥¼ í•´ë³´ì</h4>
:ET