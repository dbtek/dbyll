I"×'<p><br /><br /></p>

<h1 id="ì„œë¹„ìŠ¤-ê³„ì¸µê³¼-dto"><center>ì„œë¹„ìŠ¤ ê³„ì¸µê³¼ DTO</center></h1>

<p><br /></p>

<p><em>í•´ë‹¹ ë‚´ìš©ì€ ì±… â€˜ì½”ë“œë¡œ ë°°ìš°ëŠ” ìŠ¤í”„ë§ë¶€íŠ¸ ì›¹ í”„ë¡œì íŠ¸â€™ì˜ ë‚´ìš©ì´ë©° ì´ ê²Œì‹œë¬¼ì€ ê·¸ ì±…ì„ ê°œì¸ì ìœ¼ë¡œ ê³µë¶€í•˜ë©° ë©”ëª¨í•´ ë‘ê¸° ìœ„í•´ì„œ ì“°ëŠ” ê²ƒì„ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤</em></p>

<p><br /><br /></p>

<p>ì‹¤ì œ í”„ë¡œì íŠ¸ë¥¼ ì‘ì„±í•  ê²½ìš°ì— ì—”í‹°í‹° ê°ì²´ë¥¼ ì˜ì† ê³„ì¸µ ë°”ê¹¥ìª½ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ ë³´ë‹¤ëŠ” DTO(Data Transfer Object)ë¥¼ ì´ìš©í•˜ëŠ” ë°©ì‹ì„ ê¶Œí•œë‹¤.</p>

<p>DTOëŠ” ì—”í‹°í‹° ê°ì²´ì™€ ë‹¬ë¦¬ ê° ê³„ì¸µë¼ë¦¬ ì£¼ê³ ë°›ëŠ” ìš°í¸ë¬¼ì´ë‚˜ ìƒìì˜ ê°œë…ì´ë‹¤. ìˆœìˆ˜í•˜ê²Œ ë°ì´í„°ë¥¼ ë‹´ê³  ìˆë‹¤ëŠ” ì ì—ì„œëŠ” ì—”í‹°í‹° ê°ì²´ì™€ ìœ ì‚¬í•˜ì§€ë§Œ, ëª©ì  ìì²´ê°€ ë°ì´í„°ì˜ ì „ë‹¬ì´ë¯€ë¡œ ì½ê³ , ì“°ëŠ” ê²ƒì´ ëª¨ë‘ í—ˆìš©ë˜ëŠ” ì ì´ ê°€ëŠ¥í•˜ê³  ì¼íšŒì„±ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì„±ê²©ì´ ê°•í•˜ë‹¤.</p>

<p>ìš°ë¦¬ëŠ” ì´ì œ ì„œë¹„ìŠ¤ ê³„ì¸µì„ ìƒì„±í•˜ê³  ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œëŠ” DTOë¡œ íŒŒë¼ë¯¸í„°ì™€ ë¦¬í„´ íƒ€ì…ì„ ì²˜ë¦¬í•˜ë„ë¡ êµ¬ì„±í•  ê²ƒì´ë‹¤. DTOë¥¼ ì‚¬ìš©í•˜ë©´ ì—”í‹°í‹° ê°ì²´ì˜ ë²”ìœ„ë¥¼ í•œì • ì§€ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì¢€ ë” ì•ˆì „í•œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆê³  í™”ë©´ê³¼ ë°ì´í„°ë¥¼ ë¶„ë¦¬í•˜ë ¤ëŠ” ì·¨ì§€ì—ë„ ì¢€ ë” ë¶€í•©í•œë‹¤. DTOë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ê°€ì¥ í° ë‹¨ì ì€ Entityì™€ ìœ ì‚¬í•œ ì½”ë“œë¥¼ ì¤‘ë³µìœ¼ë¡œ ê°œë°œí•œë‹¤ëŠ” ì ê³¼, ì—”í‹°í‹° ê°ì²´ë¥¼ DTOë¡œ ë³€í™˜í•˜ê±°ë‚˜ ë°˜ëŒ€ë¡œ DTOê°ì²´ë¥¼ ì—”í‹°í‹°ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.</p>

<p>ì•„ë˜ì™€ ê°™ì´ íŒ¨í‚¤ì§€ì™€ íŒŒì¼ì„ ìƒì„±í•œë‹¤.</p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part2/Chapter4/2021-03-03-14-42-46.png" alt="" /></p>

<p><br /></p>

<p><strong>GuestbookDTO.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.guestbook.dto</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Builder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.time.LocalDateTime</span><span class="o">;</span>

<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GuestbookDTO</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">gno</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">title</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">writer</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">LocalDateTime</span> <span class="n">regDate</span><span class="o">,</span> <span class="n">modDate</span><span class="o">;</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>GuestbookDTOëŠ” ì—”í‹°í‹° í´ë˜ìŠ¤ì¸ Guestbookê³¼ ê±°ì˜ ë™ì¼í•œ í•„ë“œë“¤ì„ ê°€ì§€ê³  ìˆê³  getter/setterë¥¼ í†µí•´ ììœ ë¡­ê²Œ ê°’ì€ ë³€ê²½í•  ìˆ˜ ìˆê²Œ êµ¬ì„±í•œë‹¤. ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œëŠ” GuestbookDTOë¥¼ ì´ìš©í•´ì„œ í•„ìš”í•œ ë‚´ìš©ì„ ì „ë‹¬ë°›ê³ , ë°˜í™˜í•˜ë„ë¡ ì²˜ë¦¬í•˜ëŠ”ë° Guestbook Service ì¸í„°í˜ì´ìŠ¤ì™€ GuestbookServiceImpl í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•œë‹¤.</p>

<p><strong>GuestbookService interface</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.guestbook.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.techlead.guestbook.dto.GuestbookDTO</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GuestbookService</span> <span class="o">{</span>
    <span class="nc">Long</span> <span class="nf">register</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p><strong>GuestbookServiceImpl.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.guestbook.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.extern.log4j.Log4j2</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.techlead.guestbook.dto.GuestbookDTO</span><span class="o">;</span>

<span class="nd">@Service</span>
<span class="nd">@Log4j2</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GuestbookServiceImpl</span> <span class="kd">implements</span> <span class="nc">GuestbookService</span><span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">register</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>GuesbookServiceImpl í´ë˜ìŠ¤ì—ëŠ” ìŠ¤í”„ë§ì—ì„œ ë¹ˆìœ¼ë¡œ ì²˜ë¦¬ë˜ë¡ @Service ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì£¼ëŠ” ê²ƒì„ ìŠì§€ ë§ì.</p>

<p>ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œëŠ” íŒŒë¼ë¯¸í„°ë¥¼ DTO íƒ€ì…ìœ¼ë¡œ ë°›ê¸° ë•Œë¬¸ì— ì´ë¥¼ JPAë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ” ì—”í‹°í‹° íƒ€ì…ì˜ ê°ì²´ë¡œ ë³€í™˜í•´ì•¼ í•˜ëŠ” ì‘ì—…ì´ ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤. ì´ ê¸°ëŠ¥ì„ DTO í´ë˜ìŠ¤ì— ì ìš©í•˜ê±°ë‚˜ ModelMapper ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ MapStruct ë“±ì„ ì´ìš©í•˜ê¸°ë„ í•˜ëŠ”ë° ì´ ì±…ì˜ ì˜ˆì œì—ì„œëŠ” ì§ì ‘ ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ì„±í•œë‹¤.</p>

<p>ì´ë¯¸ ì±…ì€ ì§ì ‘ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í–ˆìœ¼ë¯€ë¡œ ìš°ë¦¬ëŠ” ModelMapperë¥¼ ì‚¬ìš©í•´ì„œ êµ¬ì„±ì„ í•´ë³´ê³  ì±…ê³¼ ë¹„êµë¥¼ í†µí•´ ModelMapperì˜ í¸ë¦¬ì„±ì„ ëŠê»´ë³¸ë‹¤.</p>

<p>ModelMapper ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì¼ë‹¨ build.gradleì— ì½”ë“œë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤.</p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part2/Chapter4/2021-03-03-15-13-38.png" alt="" /></p>

<p><br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>compile group: 'org.modelmapper', name: 'modelmapper', version: '2.3.0'
</pre></td></tr></tbody></table></code></pre></div></div>

<p>í•œì¤„ì„ ì¶”ê°€í•´ì¤€ë‹¤. ê·¸ë¦¬ê³  GuestbookService ì¸í„°í˜ì´ìŠ¤ì— ì½”ë“œë¥¼ ì¶”ê°€í•˜ì</p>

<p><strong>GuestbookService ì¸í„°í˜ì´ìŠ¤</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.guestbook.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.modelmapper.ModelMapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.techlead.guestbook.dto.GuestbookDTO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.techlead.guestbook.entity.Guestbook</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GuestbookService</span> <span class="o">{</span>
    <span class="nc">Long</span> <span class="nf">register</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">);</span>
    <span class="k">default</span> <span class="nc">Guestbook</span> <span class="nf">dtoToEntity</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">){</span>
        <span class="nc">ModelMapper</span> <span class="n">modelMapper</span><span class="o">=</span><span class="k">new</span> <span class="nc">ModelMapper</span><span class="o">();</span>
        <span class="nc">Guestbook</span> <span class="n">entity</span><span class="o">=</span><span class="n">modelMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">dto</span><span class="o">,</span><span class="nc">Guestbook</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">entity</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>GuestbookServiceì—ëŠ” ì¸í„°í˜ì´ìŠ¤ ë‚´ì— default ê¸°ëŠ¥ì„ í™œìš©í•´ì„œ êµ¬í˜„í´ë˜ìŠ¤ì—ì„œ ë™ì‘í•  ìˆ˜ ìˆëŠ” dto</p>
:ET