I"ƒ˜<p><br /><br /></p>

<h1 id="ìŠ¤í”„ë§ë¶€íŠ¸ë¡œ-ì¼ì¼-í™•ì§„ì-ê·¸ë˜í”„-ë§Œë“¤ê¸°-01"><center>ìŠ¤í”„ë§ë¶€íŠ¸ë¡œ ì¼ì¼ í™•ì§„ì ê·¸ë˜í”„ ë§Œë“¤ê¸°-01</center></h1>

<p><br /><br /></p>

<p>ì´ë²ˆ ê²Œì‹œë¬¼ì—ì„œëŠ” ìŠ¤í”„ë§ë¶€íŠ¸ì™€ Highchartë¥¼ ì´ìš©í•´ì„œ ì¼ì¼ í™•ì§„ì í‘œë¥¼ ë§Œë“¤ì–´ë³´ëŠ” ì‘ì—…í•´ë³´ê² ë‹¤.</p>

<p>Highchartê°€ ë­”ì§€ ê°„ëµí•˜ê²Œ ì‚´í´ë³´ì. í•˜ì´ì°¨íŠ¸ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì™€ htmlë¡œ ë§Œë“  ì°¨íŠ¸ ì†”ë£¨ì…˜ì´ë‹¤. ë¹„ìƒì—…ìš©ìœ¼ë¡œ ì‚¬ìš©í•  ë• ë¬´ë£Œì´ê³  ìƒì—…ì ìœ¼ë¡œ ì‚¬ìš©í•  ë• ë¹„ìš©ì´ ë“ ë‹¤. ì‚¬ì´íŠ¸ëŠ” ì•„ë˜ ë§í¬ë¥¼ í†µí•´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤.</p>

<p><strong><a href="https://www.highcharts.com/demo">Highchart ê³µì‹ ì‚¬ì´íŠ¸</a></strong></p>

<p><br /></p>

<p><img src="/images/SpringBoot/highchart/2021-02-27-20-18-58.png" alt="" /></p>

<p><br /></p>

<p>í•˜ì´ì°¨íŠ¸ ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œ ì´ë ‡ê²Œ Demos ì¹´í…Œê³ ë¦¬ì— ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ ê°ì¢… ê·¸ë˜í”„ì— ëŒ€í•œ ì†ŒìŠ¤ê°€ ì˜¤í”ˆë˜ì–´ ìˆì–´ì„œ ê·¸ëŒ€ë¡œ ê°€ì§€ê³  ì™€ì„œ ì“¸ ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” Basic Line ê·¸ë˜í”„ë¥¼ ì´ìš©í•´ì„œ ì½”ë¡œë‚˜ ì¼ì¼ í™•ì§„ì ë°ì´í„°ë¥¼ ê°€ì§€ê³  ê·¸ë˜í”„ì— í‘œì‹œë¥¼ í•´ë³¼ ì˜ˆì •ì´ë‹¤.</p>

<p><br /></p>

<p>ì ì´ì œ ì‹œì‘í•´ë³´ì.</p>

<p>ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“ ë‹¤.</p>

<p><img src="/images/SpringBoot/highchart/2021-02-27-20-21-34.png" alt="" /></p>

<p><img src="/images/SpringBoot/highchart/2021-02-27-20-22-11.png" alt="" /></p>

<p><br /></p>

<p>ì˜ì¡´ì„±ìœ¼ë¡œëŠ”</p>

<ul>
  <li>Thymeleaf</li>
  <li>Spring Boot DevTools</li>
  <li>Lombok</li>
  <li>Spring Web</li>
</ul>

<p>ìœ¼ë¡œ ì„¤ì •í•œë‹¤. ì¶”í›„ì— ë˜ í•„ìš”í•œ ê²Œ ìˆìœ¼ë©´ gradleì— ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.</p>

<p>ì´ë ‡ê²Œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±ì´ ì™„ë£Œê°€ ë˜ë©´ ìš°ë¦¬ëŠ” ì²« ë²ˆì§¸ ë‹¨ê³„ë¡œ ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ëŠ” ì‘ì—…ì„ í•  ê²ƒì´ë‹¤. ì´ì „ ê²Œì‹œë¬¼ ì¤‘ì— Corona Tracker App ê²Œì‹œë¬¼ì„ ë´¤ë‹¤ë©´ ìµìˆ™í•  ê²ƒì´ë‹¤.</p>

<p>ë°ì´í„°ëŠ” ì´ ì‚¬ì´íŠ¸ì— ìˆëŠ” csv íŒŒì¼ì—ì„œ ê°€ì ¸ì˜¬ ì˜ˆì •ì´ë‹¤.</p>

<p><strong><a href="https://github.com/CSSEGISandData/COVID-19">Github</a></strong></p>

<p><br /></p>

<p>ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì€ ê²½ë¡œë¡œ ê°€ë‹¤ë³´ë©´ time_series_covid19_confirmed_global.csvì´ë¼ëŠ” íŒŒì¼ì„ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ê²ƒì„ í´ë¦­í•˜ë©´ ì‚¬ì§„ì—ì„œ ë³´ëŠ” ê²ƒê³¼ ê°™ì´ ëª¨ë“  ë‚˜ë¼ì˜ í™•ì§„ì ìˆ˜ë¥¼ ë‚ ì§œë³„ë¡œ ë³´ì—¬ì£¼ê³  ìˆë‹¤. êµ³ì´ ì—¬ê¸°ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì´ìœ ëŠ” ì´ csv íŒŒì¼ì€ ë§¤ì¼ë§¤ì¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ëŸ¼ìœ¼ë¡œ ìš°ë¦¬ëŠ” ë§¤ì¼ë§¤ì¼ì˜ ìµœì‹  ë°ì´í„°ë¥¼ ê·¸ëŒ€ë¡œ ì´ íŒŒì¼ì„ í†µí•´ ê°€ì ¸ì˜¤ë©´ ë˜ëŠ” ê²ƒì´ë‹¤.</p>

<p><img src="/images/SpringBoot/highchart/2021-02-27-20-25-56.png" alt="" /></p>

<p><br /></p>

<p>ìœ„ ì‚¬ì§„ì—ì„œ ì˜¤ë¥¸ìª½ ì¤‘ê°„ì— Raw ë¼ê³  ë˜ì–´ ìˆëŠ” ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì. ê·¸ëŸ¬ë©´ ì•„ë˜ì™€ ê°™ì€ ë°ì´í„°ë“¤ì´ ë‚˜ì˜¬ ê²ƒì´ë‹¤. ì´ í˜ì´ì§€ì˜ ë§í¬ë¥¼ ì €ì¥í•´ ë†“ëŠ”ë‹¤.</p>

<p><img src="/images/SpringBoot/highchart/2021-02-27-20-31-21.png" alt="" /></p>

<p>ì´ì œ ë‹¤ì‹œ í”„ë¡œì íŠ¸ë¡œ ëŒì•„ê°€ì. ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì´ íŒ¨í‚¤ì§€ì™€ ìë°” í´ë˜ìŠ¤ë¥¼ ë§Œë“ ë‹¤. ê·¸ë¦¬ê³  gradleì— ë“¤ì–´ê°€ì„œ csv íŒŒì‹±ì„ ìœ„í•´ ìš°ë¦¬ê°€ ì‚¬ìš©í•  â€˜Commons Csvâ€™ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ opencsvë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì‘ì—…ì„ í•œë‹¤.</p>

<p><img src="/images/SpringBoot/highchart/2021-02-27-21-02-56.png" alt="" />
<br /></p>

<p><strong>build.gradle</strong>
<img src="/images/SpringBoot/highchart/2021-02-27-21-07-26.png" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>  <span class="n">implementation</span> <span class="nl">group:</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">opencsv</span><span class="err">'</span><span class="o">,</span> <span class="nl">name:</span> <span class="err">'</span><span class="n">opencsv</span><span class="err">'</span><span class="o">,</span> <span class="nl">version:</span> <span class="err">'</span><span class="mf">3.7</span><span class="err">'</span>
  <span class="n">compile</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">commons</span><span class="o">:</span><span class="n">commons</span><span class="o">-</span><span class="nl">csv:</span><span class="mf">1.8</span><span class="err">'</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p><strong>ë°”ë€ ì˜ì¡´ì„±ì„ ì ìš©í•˜ëŠ” ë²„íŠ¼</strong></p>

<p><img src="/images/SpringBoot/highchart/2021-02-27-20-38-07.png" alt="" /></p>

<p>ì´ì œ ë‹¤ì‹œ ìš°ë¦¬ê°€ ë°©ê¸ˆ ìƒì„±í–ˆë˜ ìë°” í´ë˜ìŠ¤ ì¤‘ CoronaVirusDataService.javaì— ë“¤ì–´ê°€ì„œ ì½”ë“œë¥¼ ì‘ì„±í•´ ë³´ì.</p>

<p><strong>CoronaVirusDataService.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.highchart_csv_example.services</span><span class="o">;</span>


<span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.csv.CSVFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.opencsv.CSVReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.csv.CSVRecord</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.scheduling.annotation.Scheduled</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.annotation.PostConstruct</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.http.HttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.http.HttpRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.http.HttpResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>


<span class="nd">@Service</span>
<span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CoronaVirusDataService</span> <span class="o">{</span>

    <span class="c1">//Raw ë°ì´í„°ê°€ ìˆëŠ” URL ì €ì¥</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="no">VIRUS_DATA_URL</span> <span class="o">=</span> <span class="s">"https://raw.githubusercontent.com/"</span><span class="o">+</span>
            <span class="s">"CSSEGISandData/COVID-19/master/"</span><span class="o">+</span>
            <span class="s">"csse_covid_19_data/csse_covid_19_time_series/"</span><span class="o">+</span>
            <span class="s">"time_series_covid19_confirmed_global.csv"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">dates</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">datesConfirmed</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">increaseFromYesterday</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>


    <span class="c1">//ì´ ì–´ë…¸í…Œì´ì…˜ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë˜ë©´ ìŠ¤í”„ë§ì€</span>
    <span class="c1">//ì´ ì„œë¹„ìŠ¤ ê°ì²´ë¥¼ ë§Œë“¤ê²Œ ë˜ê³  ê°ì²´ë¥¼ ë‹¤ ìƒì„±í•˜ê³  ë‚˜ë©´</span>
    <span class="c1">//ì´ @PostConstruct ì–´ë…¸í…Œì´ì…˜ì´</span>
    <span class="c1">//ìˆëŠ” ë©”ì†Œë“œë¥¼ ìë™ìœ¼ë¡œ ì‹¤í–‰ì‹œì¼œì¤€ë‹¤.</span>
    <span class="nd">@PostConstruct</span>
    <span class="c1">//ì´ ë©”ì†Œë“œë¥¼ ë§¤ì´ˆ ì‹¤í–‰í•˜ë¼ê³  ì•Œë ¤ì£¼ëŠ” ê²ƒì´ë‹¤.</span>
    <span class="c1">//* * * * * *ëŠ” ë…„ë„, ë‹¬, ì¼, ì‹œê°„, ë¶„, ì´ˆë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.</span>
    <span class="nd">@Scheduled</span><span class="o">(</span><span class="n">cron</span> <span class="o">=</span> <span class="s">"* * 1 * * *"</span><span class="o">)</span>
    <span class="c1">//http callë¥¼ í•  ë©”ì†Œë“œ</span>
    <span class="c1">//client.sendë¶€ë¶„ì—ì„œ send í•¨ìˆ˜ë¥¼ ì“°ë ¤ë©´ exceptionë¥¼ ë°›ì•„ì•¼ í•œë‹¤.</span>
    <span class="c1">//ê·¸ê²ƒì„ ë°›ëŠ” ëŒ€ì‹  throwë¥¼ í•˜ê² ë‹¤.</span>
    <span class="c1">//client.sendì´ ì‹¤íŒ¨í•˜ë©´ exceptionë¥¼ throwí•œë‹¤.</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fetchVirusData</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">,</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
        <span class="c1">//ìš°ë¦¬ê°€ Http callë¥¼ í•˜ê¸° ìœ„í•´ì„œëŠ” HttpClientë¥¼ ì‚¬ìš©í•œë‹¤.</span>
        <span class="nc">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="nc">HttpClient</span><span class="o">.</span><span class="na">newHttpClient</span><span class="o">();</span>


        <span class="c1">//ë¹Œë” íŒ¨í„´ì„ ì‚¬ìš©ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ê³  ìœ„ì— ì„ ì–¸í•œ VIRUS_DATA_URL ë¬¸ìì—´ì„ urië¡œ ë°”ê¾¸ê¸° ìœ„í•œ ì‘ì—…ì´ë‹¤.</span>
        <span class="c1">//ì–´ë””ë¡œ Http ìš”ì²­ì„ í• ì§€ ì„¤ì •í•œë‹¤.</span>
        <span class="nc">HttpRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">HttpRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="no">URI</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="no">VIRUS_DATA_URL</span><span class="o">))</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>

        <span class="c1">//ì´ì œ clientë¥¼ ë³´ëƒ„ìœ¼ë¡œì¨ responseë¥¼ ë°›ì„ ê²ƒì´ë‹¤.</span>
        <span class="c1">//ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œëŠ” request ê·¸ë¦¬ê³  ë‘ ë²ˆì§¸ë¡œëŠ” bodyHandlerë¥¼ ë„£ëŠ”ë‹¤.</span>
        <span class="c1">//BodyHandlerëŠ” Bodyë¥¼ ë¬´ì—‡ì„ í•  ê±´ì§€ ì •í•  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ ê¸°ëŠ¥ë“¤ì´ ìˆë‹¤.</span>
        <span class="c1">//http Bodyë¥¼ ë¬¸ìì—´ë¡œ ë°˜í™˜í•´ì£¼ëŠ” ê²ƒì´ë‹¤.</span>
        <span class="nc">HttpResponse</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="nc">HttpResponse</span><span class="o">.</span><span class="na">BodyHandlers</span><span class="o">.</span><span class="na">ofString</span><span class="o">());</span>


        <span class="c1">//StringReaderëŠ” Stringì„ Parseí•˜ëŠ” ë¦¬ë” ê°ì²´ì´ë‹¤.</span>
        <span class="c1">//ê·¸ë˜ì„œ ë‚˜ëŠ” String ê°ì²´ë¡œë¶€í„° readerê°ì²´ê°€ ìˆëŠ” ê²ƒì´ë‹¤.</span>
        <span class="nc">StringReader</span> <span class="n">csvBodyReader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringReader</span><span class="o">(</span><span class="n">httpResponse</span><span class="o">.</span><span class="na">body</span><span class="o">());</span>


        <span class="c1">//ê·¸ë¦¬ê³  ìœ„í•´ì„œ ë°˜í™˜ë°›ì€ ë¬¸ìì—´ì„ ì°ì–´ë³¸ë‹¤.</span>
        <span class="c1">// System.out.println(httpResponse.body());</span>

        <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">CSVRecord</span><span class="o">&gt;</span> <span class="n">records</span> <span class="o">=</span> <span class="nc">CSVFormat</span><span class="o">.</span><span class="na">DEFAULT</span><span class="o">.</span><span class="na">withFirstRecordAsHeader</span><span class="o">().</span><span class="na">parse</span><span class="o">(</span><span class="n">csvBodyReader</span><span class="o">);</span>


        <span class="c1">//csv í—¤ë”ë¥¼ ì¶”ì¶œí•˜ê¸° ìœ„í•œ ì½”ë“œ 2ì¤„</span>
        <span class="no">URL</span> <span class="n">headerURL</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="no">VIRUS_DATA_URL</span><span class="o">);</span>
        <span class="nc">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">headerURL</span><span class="o">.</span><span class="na">openStream</span><span class="o">()));</span>
        <span class="nc">CSVReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CSVReader</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>


       <span class="c1">// if the first line is the header</span>
        <span class="nc">String</span><span class="o">[]</span> <span class="n">header</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readNext</span><span class="o">();</span>


        <span class="k">for</span> <span class="o">(</span><span class="nc">CSVRecord</span> <span class="n">record</span> <span class="o">:</span> <span class="n">records</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"Country/Region"</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="s">"Korea, South"</span><span class="o">))</span> <span class="o">{</span>

                <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">--)</span> <span class="o">{</span>
                    <span class="c1">//10ì¼ ë™ì•ˆì˜ ë‚ ì§œ ë¬¸ìì—´ì„ ì–»ìŒ</span>
                    <span class="n">dates</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">header</span><span class="o">[</span><span class="n">header</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="n">i</span><span class="o">]);</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Dates: "</span> <span class="o">+</span> <span class="n">header</span><span class="o">[</span><span class="n">header</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="n">i</span><span class="o">]);</span>

                    <span class="c1">//10ì¼ ë™ì•ˆì˜ ì „ì²´ í™•ì§„ììˆ˜</span>
                    <span class="n">datesConfirmed</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">-</span> <span class="n">i</span><span class="o">)));</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Confirmed: "</span> <span class="o">+</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">-</span> <span class="n">i</span><span class="o">)));</span>

                    <span class="c1">//ì œì¼ ìµœê·¼ ì „ì²´ í™•ì§„ì ìˆ˜</span>
                    <span class="kt">int</span> <span class="n">latestCases</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">-</span> <span class="n">i</span><span class="o">));</span>
                    <span class="c1">//ë°”ë¡œ ì „ë‚  ì „ì²´ í™•ì§„ì ìˆ˜</span>
                    <span class="kt">int</span> <span class="n">prevDayCases</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">-</span> <span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)));</span>

                    <span class="c1">//ìœ„ ë‘ ë³€ìˆ˜ì˜ ì°¨ì´ë¡œ ì „ë‚  ëŒ€ë¹„ ëª‡ëª…ì˜ í™•ì§„ìê°€ ì¦ê°€í–ˆëŠ”ì§€ êµ¬í•´ì„œ ë„£ëŠ”ë‹¤.</span>
                    <span class="n">increaseFromYesterday</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">latestCases</span> <span class="o">-</span> <span class="n">prevDayCases</span><span class="o">);</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Confirmed difference: "</span> <span class="o">+</span> <span class="o">(</span><span class="n">latestCases</span> <span class="o">-</span> <span class="n">prevDayCases</span><span class="o">));</span>

                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>


</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ì´ì œ HomeController.javaì— ì½”ë“œë¥¼ ì‚½ì…í•´ ë³´ì</p>

<p><strong>HomeController.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.highchart_csv_example.controller</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.ui.Model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.techlead.highchart_csv_example.services.CoronaVirusDataService</span><span class="o">;</span>


<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeController</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="nc">CoronaVirusDataService</span> <span class="n">coronaVirusDataService</span><span class="o">;</span>


    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getData</span><span class="o">(</span><span class="nc">Model</span> <span class="n">model</span><span class="o">){</span>


        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"dates"</span><span class="o">,</span><span class="n">coronaVirusDataService</span><span class="o">.</span><span class="na">getDates</span><span class="o">());</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"datesConfirmed"</span><span class="o">,</span><span class="n">coronaVirusDataService</span><span class="o">.</span><span class="na">getDatesConfirmed</span><span class="o">());</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"increaseFromYesterday"</span><span class="o">,</span><span class="n">coronaVirusDataService</span><span class="o">.</span><span class="na">getIncreaseFromYesterday</span><span class="o">());</span>
        <span class="k">return</span> <span class="s">"index"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>ë‹¤ìŒì€ html íŒŒì¼ì„ ìƒì„±í•  ì°¨ë¡€ë‹¤. ê·¸ ì „ì— ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ ë””ë ‰í† ë¦¬ì™€ íŒŒì¼ë“¤ì„ ìƒì„±í•œë‹¤.</p>

<p><img src="/images/SpringBoot/highchart/2021-02-27-22-33-59.png" alt="" /></p>

<p><strong>index.css</strong></p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
</pre></td><td class="rouge-code"><pre><span class="nc">.highcharts-figure</span><span class="o">,</span>
<span class="nc">.highcharts-data-table</span> <span class="nt">table</span> <span class="p">{</span>
  <span class="nl">min-width</span><span class="p">:</span> <span class="m">360px</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">800px</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">1em</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.highcharts-data-table</span> <span class="nt">table</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="n">Verdana</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
  <span class="nl">border-collapse</span><span class="p">:</span> <span class="nb">collapse</span><span class="p">;</span>
  <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#ebebeb</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">10px</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">500px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.highcharts-data-table</span> <span class="nt">caption</span> <span class="p">{</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">1em</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">1.2em</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#555</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.highcharts-data-table</span> <span class="nt">th</span> <span class="p">{</span>
  <span class="nl">font-weight</span><span class="p">:</span> <span class="m">600</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">0.5em</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.highcharts-data-table</span> <span class="nt">td</span><span class="o">,</span>
<span class="nc">.highcharts-data-table</span> <span class="nt">th</span><span class="o">,</span>
<span class="nc">.highcharts-data-table</span> <span class="nt">caption</span> <span class="p">{</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">0.5em</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.highcharts-data-table</span> <span class="nt">thead</span> <span class="nt">tr</span><span class="o">,</span>
<span class="nc">.highcharts-data-table</span> <span class="nt">tr</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">even</span><span class="o">)</span> <span class="p">{</span>
  <span class="nl">background</span><span class="p">:</span> <span class="m">#f8f8f8</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.highcharts-data-table</span> <span class="nt">tr</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="nl">background</span><span class="p">:</span> <span class="m">#f1f7ff</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">h2</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="nb">sans-serif</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">1.5em</span><span class="p">;</span>
  <span class="nl">text-transform</span><span class="p">:</span> <span class="nb">uppercase</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">strong</span> <span class="p">{</span>
  <span class="nl">font-weight</span><span class="p">:</span> <span class="m">700</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">yellow</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">p</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="nb">sans-serif</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p><strong>index.html</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span> <span class="na">xmlns:th=</span><span class="s">"http://www.thymeleaf.org"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>

    <span class="nt">&lt;link</span> <span class="na">th:href=</span><span class="s">"@{/css/index.css}"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.highcharts.com/highcharts.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.highcharts.com/modules/series-label.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.highcharts.com/modules/exporting.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.highcharts.com/modules/export-data.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.highcharts.com/modules/accessibility.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span>
        <span class="na">id=</span><span class="s">"container"</span>
        <span class="na">style=</span><span class="s">"width: 550px; height: 400px; margin: 0 auto"</span>
      <span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;script </span><span class="na">th:inline=</span><span class="s">"javascript"</span><span class="nt">&gt;</span>

      <span class="kd">const</span> <span class="nx">listDates</span><span class="o">=</span><span class="p">[[</span><span class="nx">$</span><span class="p">{</span><span class="nx">dates</span><span class="p">}]];</span>
      <span class="kd">const</span> <span class="nx">listDatesConfirmed</span><span class="o">=</span><span class="p">[[</span><span class="nx">$</span><span class="p">{</span><span class="nx">datesConfirmed</span><span class="p">}]];</span>
      <span class="kd">const</span> <span class="nx">listIncreaseFromYesterday</span><span class="o">=</span><span class="p">[[</span><span class="nx">$</span><span class="p">{</span><span class="nx">increaseFromYesterday</span><span class="p">}]];</span>

      <span class="nx">Highcharts</span><span class="p">.</span><span class="nx">chart</span><span class="p">(</span><span class="dl">'</span><span class="s1">container</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>

          <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ì¼ì¼ í™•ì§„ì ìˆ˜</span><span class="dl">'</span>
          <span class="p">},</span>
          <span class="na">subtitle</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ì „ì²´ í™•ì§„ì ìˆ˜: </span><span class="dl">'</span><span class="o">+</span><span class="nx">listDatesConfirmed</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
          <span class="p">},</span>

          <span class="na">xAxis</span><span class="p">:</span> <span class="p">{</span>
              <span class="c1">// categories: category</span>
              <span class="na">categories</span><span class="p">:</span> <span class="nx">listDates</span><span class="p">,</span>

              <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ë‚ ì§œ</span><span class="dl">'</span>
              <span class="p">}</span>

          <span class="p">},</span>
          <span class="na">yAxis</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ì „ì²´ í™•ì§„ì ìˆ˜</span><span class="dl">'</span>
              <span class="p">}</span>
          <span class="p">},</span>

          <span class="na">legend</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">layout</span><span class="p">:</span> <span class="dl">'</span><span class="s1">vertical</span><span class="dl">'</span><span class="p">,</span>
              <span class="na">align</span><span class="p">:</span> <span class="dl">'</span><span class="s1">right</span><span class="dl">'</span><span class="p">,</span>
              <span class="na">verticalAlign</span><span class="p">:</span> <span class="dl">'</span><span class="s1">middle</span><span class="dl">'</span>
          <span class="p">},</span>

          <span class="na">plotOptions</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">series</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">label</span><span class="p">:</span> <span class="p">{</span>
                      <span class="na">connectorAllowed</span><span class="p">:</span> <span class="kc">false</span>
                  <span class="p">},</span>
              <span class="p">},</span>
              <span class="na">line</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">dataLabels</span><span class="p">:</span> <span class="p">{</span>
                      <span class="na">enabled</span><span class="p">:</span> <span class="kc">true</span>
                  <span class="p">},</span>
              <span class="p">}</span>
          <span class="p">},</span>

          <span class="na">series</span><span class="p">:</span> <span class="p">[{</span>
              <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ì „ë‚  ë¹„êµ í™•ì§„ì ìˆ˜</span><span class="dl">'</span><span class="p">,</span>
              <span class="na">data</span><span class="p">:</span> <span class="nx">listIncreaseFromYesterday</span>
          <span class="p">}],</span>

          <span class="na">responsive</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">rules</span><span class="p">:</span> <span class="p">[{</span>
                  <span class="na">condition</span><span class="p">:</span> <span class="p">{</span>
                      <span class="na">maxWidth</span><span class="p">:</span> <span class="mi">500</span>
                  <span class="p">},</span>
                  <span class="na">chartOptions</span><span class="p">:</span> <span class="p">{</span>
                      <span class="na">legend</span><span class="p">:</span> <span class="p">{</span>
                          <span class="na">layout</span><span class="p">:</span> <span class="dl">'</span><span class="s1">horizontal</span><span class="dl">'</span><span class="p">,</span>
                          <span class="na">align</span><span class="p">:</span> <span class="dl">'</span><span class="s1">center</span><span class="dl">'</span><span class="p">,</span>
                          <span class="na">verticalAlign</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bottom</span><span class="dl">'</span>
                      <span class="p">}</span>
                  <span class="p">}</span>
              <span class="p">}]</span>
          <span class="p">}</span>

      <span class="p">});</span>
    <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><br /></p>

<p>ì ì´ì œ ëª¨ë“  ê²ƒì´ ì™„ì„± ë˜ì—ˆë‹¤. ì•±ì„ ì‹¤í–‰ì‹œì¼œ ë³´ì. ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ ì„  ê·¸ë˜í”„ì— ë‚ ì§œë³„ ì¼ì¼ í™•ì§„ììˆ˜ë¥¼ í‘œì‹œí•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><img src="/images/SpringBoot/highchart/2021-02-27-22-36-57.png" alt="" /></p>

<p><br /></p>

<p>ìš°ë¦¬ê°€ í•œ ê²ƒì€ ë‹¨ìˆœíˆ ì¼ì¼ í™•ì§„ì ë°–ì— ì—†ì§€ë§Œ ì—¬ê¸°ì—ëŠ” ê²©ë¦¬í•´ì œ, ê·¸ë¦¬ê³  ì‚¬ë§ì ìˆ˜ë„ í¬í•¨ì‹œí‚¬ ìˆ˜ë„ ìˆë‹¤. í•˜ì§€ë§Œ ìš°ë¦¬ê°€ íŒŒì‹±í•œ csv íŒŒì¼ì€ ë‹¨ìˆœíˆ ì „ì²´ í™•ì§„ììˆ˜ë§Œì„ ë³´ì—¬ì¤Œìœ¼ë¡œ ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ì–»ì„ ìˆ˜ ì—†ë‹¤. í•˜ì§€ë§Œ ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì´ ì‚¬ë§ì ìˆ˜ë¥¼ ì •ë¦¬í•œ csv íŒŒì¼, ê²©ë¦¬í•´ì œëœ csv íŒŒì¼ ë“± ë§ì€ ë°ì´í„°ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><img src="/images/SpringBoot/highchart/2021-02-27-22-40-31.png" alt="" /></p>

<p><br /></p>

<p>ë¬¸ì œëŠ” ì´ë ‡ê²Œ csv íŒŒì¼ì„ í•˜ë‚˜í•˜ë‚˜ ë‹¤ requestí•˜ê²Œ í•˜ë©´ ë¹„íš¨ìœ¨ì ì¼ ë¿ë§Œ ì•„ë‹ˆë¼ ê·¸ë§Œí¼ ì½”ë“œë„ ê¸¸ì–´ì§€ê³  ê°€ë…ì„±ë„ ë–¨ì–´ì§„ë‹¤. ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ ì € ê·¸ë˜í”„ì— ë§ì€ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ë©´ì„œ ì½”ë“œëŠ” ìµœëŒ€í•œ ê°„ê²°í•˜ê²Œ í•  ìˆ˜ ìˆì„ê¹Œ? ê·¸ê²ƒì€ ë°”ë¡œ ê³µê³µ ë°ì´í„° APIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤. ë°”ë¡œ ë‹¤ìŒ ê²Œì‹œë¬¼ì—ì„œ ì„¤ëª…í•˜ê² ì§€ë§Œ ì´ë¥¼ ì´ìš©í•˜ë©´ ëª¨ë“  ì½”ë¡œë‚˜ì— ëŒ€í•œ ì •ë³´ë“¤ì„ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í›¨ì”¬ ë” ì½”ë“œê°€</p>
:ET