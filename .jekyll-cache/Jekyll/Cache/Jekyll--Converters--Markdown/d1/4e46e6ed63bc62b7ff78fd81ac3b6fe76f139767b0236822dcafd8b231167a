I"‰l<p><br /><br />
<br /><br /></p>

<h1 id="ìŠ¤í”„ë§ë¶€íŠ¸ë¡œ-ì½”ë¡œë‚˜-ë°”ì´ëŸ¬ìŠ¤-íŠ¸ë˜ì»¤-ë§Œë“¤ê¸°-03"><center>ìŠ¤í”„ë§ë¶€íŠ¸ë¡œ ì½”ë¡œë‚˜ ë°”ì´ëŸ¬ìŠ¤ íŠ¸ë˜ì»¤ ë§Œë“¤ê¸°-03</center></h1>

<p><br /><br /></p>

<p><em>ì´ í”„ë¡œì íŠ¸ëŠ” <strong>Java Brains</strong> ìœ íˆ¬ë¸Œ ì˜ìƒì„ ë³´ë©° ê³µë¶€í•œ ê²ƒì„ ì •ë¦¬í•˜ê¸° ìœ„í•´ì„œ ë‚¨ê¹€ì„ ì•Œë¦½ë‹ˆë‹¤. ì˜ìƒê³¼ëŠ” ì¡°ê¸ˆ ë‹¤ë¥¼ ìˆ˜ ìˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.</em></p>

<p><a href="https://www.youtube.com/watch?v=8hjNG9GZGnQ">Youtube ì˜ìƒ</a></p>

<hr />

<p>ì´ì „ ê²Œì‹œë¬¼ì—ì„œ Commons-csv ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ í—¤ë”ì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ì¶”ì¶œí•˜ëŠ” ê²ƒì„ í•´ë´¤ë‹¤. ì´ë²ˆì—ëŠ” ê·¸ ê°’ë“¤ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  ë¦¬ìŠ¤íŠ¸ì— ê·¸ ê°’ë“¤ì„ ë‹´ì•„ë³´ê² ë‹¤. ë¨¼ì € model íŒ¨í‚¤ì§€ì™€ ê·¸ ì•ˆì— LocationStats.java íŒŒì¼ì„ ë§Œë“ ë‹¤.</p>

<p><img src="/images/Program/post-7/2021-02-22-16-44-56.png" alt="" /></p>

<p><br /></p>

<p><strong>LocationStats.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">io.javabrains.coronavirustracker.models</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LocationStats</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">state</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">country</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">latestTotalCases</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getState</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">state</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setState</span><span class="o">(</span><span class="nc">String</span> <span class="n">state</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">state</span> <span class="o">=</span> <span class="n">state</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getCountry</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">country</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCountry</span><span class="o">(</span><span class="nc">String</span> <span class="n">country</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">country</span> <span class="o">=</span> <span class="n">country</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getLatestTotalCases</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">latestTotalCases</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setLatestTotalCases</span><span class="o">(</span><span class="kt">int</span> <span class="n">latestTotalCases</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">latestTotalCases</span> <span class="o">=</span> <span class="n">latestTotalCases</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ë‹¤ ë§Œë“¤ì—ˆìœ¼ë©´ ì´ì œ ì´ í´ë˜ìŠ¤ ê°ì²´ë¥¼ ì´ìš©í•´ì„œ í—¤ë” ê°’ë“¤ì„ ë‹´ì„ ìˆ˜ ìˆëŠ” ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ì.</p>

<p><strong>CoronaVirusDataService.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CoronaVirusDataService</span> <span class="o">{</span>

   <span class="o">(...)</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LocationStats</span><span class="o">&gt;</span> <span class="n">allStats</span><span class="o">=</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="nd">@PostConstruct</span>
    <span class="nd">@Scheduled</span><span class="o">(</span><span class="n">cron</span><span class="o">=</span><span class="s">"* * 1 * * *"</span><span class="o">)</span>
    <span class="o">(...)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ì ì´ì œ ìš°ë¦¬ëŠ” LocationStats ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
LocationStats í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì—ˆìœ¼ë‹ˆ ì´ê²ƒì„ ì´ìš©í•´ì„œ ê° ë°ì´í„°ë¥¼ ì´ í´ë˜ìŠ¤ ë³€ìˆ˜ì— ë‹´ê³  ì¶œë ¥í•´ì„œ í™•ì¸í•´ ë³´ì. ë¨¼ì € LocationStatsì—ì„œ toString() ë©”ì„œë“œë¥¼ ì •ì˜í•´ì¤€ë‹¤.</p>

<p><strong>LocationStats.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">io.javabrains.coronavirustracker.models</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LocationStats</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">state</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">country</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">latestTotalCases</span><span class="o">;</span>

    <span class="o">(...)</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"LocationStats{"</span> <span class="o">+</span>
                <span class="s">"state='"</span> <span class="o">+</span> <span class="n">state</span> <span class="o">+</span> <span class="sc">'\''</span> <span class="o">+</span>
                <span class="s">", country='"</span> <span class="o">+</span> <span class="n">country</span> <span class="o">+</span> <span class="sc">'\''</span> <span class="o">+</span>
                <span class="s">", latestTotalCases="</span> <span class="o">+</span> <span class="n">latestTotalCases</span> <span class="o">+</span>
                <span class="sc">'}'</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ì„œë¹„ìŠ¤ ìë°” íŒŒì¼ì„ ë‹¤ì‹œ ìˆ˜ì •í•œë‹¤</p>

<p><strong>CoronaVirusDataService.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="rouge-code"><pre><span class="o">(...)</span>
<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CoronaVirusDataService</span> <span class="o">{</span>

    <span class="o">(...)</span>

    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LocationStats</span><span class="o">&gt;</span> <span class="n">allStats</span><span class="o">=</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="nd">@PostConstruct</span>
    <span class="nd">@Scheduled</span><span class="o">(</span><span class="n">cron</span><span class="o">=</span><span class="s">"* * 1 * * *"</span><span class="o">)</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fetchVirusData</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">,</span> <span class="nc">InterruptedException</span><span class="o">{</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LocationStats</span><span class="o">&gt;</span> <span class="n">newStats</span><span class="o">=</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

        <span class="nc">HttpClient</span> <span class="n">client</span><span class="o">=</span><span class="nc">HttpClient</span><span class="o">.</span><span class="na">newHttpClient</span><span class="o">();</span>
        <span class="o">(...)</span>

        <span class="k">for</span> <span class="o">(</span><span class="nc">CSVRecord</span> <span class="n">record</span> <span class="o">:</span> <span class="n">records</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">LocationStats</span> <span class="n">locationStat</span><span class="o">=</span><span class="k">new</span> <span class="nc">LocationStats</span><span class="o">();</span>
            <span class="n">locationStat</span><span class="o">.</span><span class="na">setState</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"Province/State"</span><span class="o">));</span>
            <span class="n">locationStat</span><span class="o">.</span><span class="na">setCountry</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"Country/Region"</span><span class="o">));</span>
            <span class="n">locationStat</span><span class="o">.</span><span class="na">setLatestTotalCases</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">size</span><span class="o">()-</span><span class="mi">1</span><span class="o">)));</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">locationStat</span><span class="o">);</span>
            <span class="n">newStats</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">locationStat</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">this</span><span class="o">.</span><span class="na">allStats</span><span class="o">=</span><span class="n">newStats</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <h5 id="7-lacationstatsë¥¼-ë‹´ì„-ìˆ˜-ìˆëŠ”-ë¦¬ìŠ¤íŠ¸-ê°ì²´ë¥¼-ì„ ì–¸í•œë‹¤">7: LacationStatsë¥¼ ë‹´ì„ ìˆ˜ ìˆëŠ” ë¦¬ìŠ¤íŠ¸ ê°ì²´ë¥¼ ì„ ì–¸í•œë‹¤.<br /><br /></h5>

  <h5 id="14-fetchvirusdata-ë©”ì†Œë“œ-ì•ˆì—-ë˜-newstats-ê°ì²´-ë°°ì—´ì„-ë§Œë“œëŠ”-ì´ìœ ëŠ”-ë™ì‹œì„±-ë¬¸ì œ-ë•Œë¬¸ì´ë‹¤-ë§ì€-ì‚¬ëŒë“¤ì´-ì„œë²„ì—-ì ‘ê·¼í•˜ê²Œ-ë˜ëŠ”ë°-ìš°ë¦¬ê°€-ì´-ì•±ì„-êµ¬ì„±í•˜ê³ -ìˆëŠ”-ë™ì•ˆì—-ì„œë²„ì—-ì ‘ê·¼í•˜ë ¤ëŠ”-ì‚¬ëŒë“¤ì´-ì—ëŸ¬-responseë¥¼-ê°–ê²Œ-í•˜ì§€-ì•Šê¸°-ìœ„í•´ì„œë‹¤-ê·¸ë˜ì„œ-ìƒˆë¡œìš´-locationstats-ê°ì²´newstatsë¥¼-ë§Œë“¤ì–´ì„œ-ì•±ì„-êµ¬ì„±í•˜ëŠ”-ì‘ì—…ì´-ëë‚˜ë©´-newstatsë¥¼-allstatsë¡œ-ë§ë¶™ì´ëŠ”-í˜•ì‹ìœ¼ë¡œ-í•œë‹¤-ì´-ë©”ì†Œë“œê°€-ì‹¤í–‰ë˜ëŠ”-ê·¸-ì§§ì€-ì‹œê°„ì—-ìœ ì €ê°€-requestë¥¼-í•´ë„-í˜„ì¬-ë°ì´í„°allstatsë¥¼-ë³´ì—¬ì¤„-ê²ƒì´ë‹¤">14: fetchVirusData() ë©”ì†Œë“œ ì•ˆì— ë˜ newStats ê°ì²´ ë°°ì—´ì„ ë§Œë“œëŠ” ì´ìœ ëŠ” ë™ì‹œì„± ë¬¸ì œ ë•Œë¬¸ì´ë‹¤. ë§ì€ ì‚¬ëŒë“¤ì´ ì„œë²„ì— ì ‘ê·¼í•˜ê²Œ ë˜ëŠ”ë° ìš°ë¦¬ê°€ ì´ ì•±ì„ êµ¬ì„±í•˜ê³  ìˆëŠ” ë™ì•ˆì— ì„œë²„ì— ì ‘ê·¼í•˜ë ¤ëŠ” ì‚¬ëŒë“¤ì´ ì—ëŸ¬ responseë¥¼ ê°–ê²Œ í•˜ì§€ ì•Šê¸° ìœ„í•´ì„œë‹¤. ê·¸ë˜ì„œ ìƒˆë¡œìš´ LocationStats ê°ì²´(newStats)ë¥¼ ë§Œë“¤ì–´ì„œ ì•±ì„ êµ¬ì„±í•˜ëŠ” ì‘ì—…ì´ ëë‚˜ë©´ newStatsë¥¼ allStatsë¡œ ë§ë¶™ì´ëŠ” í˜•ì‹ìœ¼ë¡œ í•œë‹¤. ì´ ë©”ì†Œë“œê°€ ì‹¤í–‰ë˜ëŠ” ê·¸ ì§§ì€ ì‹œê°„ì— ìœ ì €ê°€ requestë¥¼ í•´ë„ í˜„ì¬ ë°ì´í„°(allStats)ë¥¼ ë³´ì—¬ì¤„ ê²ƒì´ë‹¤.<br /><br /></h5>

  <h5 id="23-csv-íŒŒì¼ì„-ë³´ë©´-ë§¤ì¼-ê·¸ë‚ -ë‚ ì§œë¡œ-ì—…ë°ì´íŠ¸-ëœë‹¤-ìš°ë¦¬ëŠ”-ì—¬ê¸°ì„œ-ê°€ì¥-ë§ˆì§€ë§‰-ë‚ ì˜-ë°ì´í„°ë¥¼-ë½‘ì•„ë‚´ì•¼-í•˜ëŠ”ë°-commons-csvì˜-user-guide-ì¤‘-ì¸ë±ìŠ¤ë¡œ-ê°’ì„-ì¡°íšŒí•˜ëŠ”-ë©”ì„œë“œë¥¼-ì œê³µí•œë‹¤-ê·¸ë˜ì„œ-recordsize-1ë¥¼-ì´ìš©í•´ì„œ-ê°€ì¥-ìµœê·¼-ë‚ ì§œì˜-í™•ì§„ì-ìˆ˜ë¥¼-ê°€ì ¸ì˜¬-ìˆ˜-ìˆë‹¤-ì´-ë©”ì„œë“œì˜-ë°˜í™˜í˜•ì€-stringì´ê¸°-ë•Œë¬¸ì—-integerë¡œ-parseí•´ì„œ-ë°›ì•„ì˜¨ë‹¤">23: csv íŒŒì¼ì„ ë³´ë©´ ë§¤ì¼ ê·¸ë‚  ë‚ ì§œë¡œ ì—…ë°ì´íŠ¸ ëœë‹¤. ìš°ë¦¬ëŠ” ì—¬ê¸°ì„œ ê°€ì¥ ë§ˆì§€ë§‰ ë‚ ì˜ ë°ì´í„°ë¥¼ ë½‘ì•„ë‚´ì•¼ í•˜ëŠ”ë° Commons-Csvì˜ user guide ì¤‘ ì¸ë±ìŠ¤ë¡œ ê°’ì„ ì¡°íšŒí•˜ëŠ” ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤. ê·¸ë˜ì„œ record.size()-1ë¥¼ ì´ìš©í•´ì„œ ê°€ì¥ ìµœê·¼ ë‚ ì§œì˜ í™•ì§„ì ìˆ˜ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ì´ ë©”ì„œë“œì˜ ë°˜í™˜í˜•ì€ Stringì´ê¸° ë•Œë¬¸ì— Integerë¡œ parseí•´ì„œ ë°›ì•„ì˜¨ë‹¤.<br /><br /></h5>

  <h5 id="24-tostring-ë©”ì„œë“œ-í˜¸ì¶œë¡œ-ê°-ë°ì´í„°-ì¶œë ¥">24: toString() ë©”ì„œë“œ í˜¸ì¶œë¡œ ê° ë°ì´í„° ì¶œë ¥<br /><br /></h5>

  <h5 id="25-27-ë™ì‹œì„±-ë¬¸ì œ-í•´ê²°ì„-ìœ„í•œ-ì½”ë“œ-">25, 27: ë™ì‹œì„± ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ì½”ë“œ <br /></h5>
</blockquote>

<p>ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰ì‹œí‚¤ë©´ ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì´ ê²°ê³¼ê°€ ì˜ ë‚˜ì˜¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><img src="/images/Program/post-7/2021-02-22-17-19-24.png" alt="" /></p>

<p><br /></p>

<p>ì´ì œ í•  ê²ƒì€ ì´ ë°ì´í„°ë¥¼ ui í¬ë§·ìœ¼ë¡œ ëœë”ë§í•˜ëŠ” ê²ƒì´ë‹¤. urlì— ì ‘ê·¼í•˜ì—¬ ì´ statsë¥¼ ëœë”ë§í•˜ì—¬ html íŒŒì¼ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤. Controllerë¥¼ ë§Œë“¤ì–´ë³´ì. ê·¸ì „ì— ë¨¼ì œ html íŒŒì¼ì„ ë§Œë“¤ê³  thymeleaf ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œ ì“¸ë§Œí•œ í…œí”Œë¦¿ì„ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ëŠ”ë‹¤.</p>

<p><img src="/images/Program/post-7/2021-02-22-17-33-22.png" alt="" /></p>

<p><br /></p>

<p><strong><a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleaf Document</a></strong></p>

<p>ì´ ì‚¬ì´íŠ¸ì—ì„œ ì“¸ë§Œí•œ í…œí”Œë¦¿ì„ ì°¾ëŠ”ë‹¤.</p>

<p><img src="/images/Program/post-7/2021-02-22-17-34-21.png" alt="" /></p>

<p><br /></p>

<p>ê°€ì¥ ë¬´ë‚œí•œ ì´ ì½”ë“œë¥¼ ê°€ì ¸ë‹¤ê°€ ì“´ë‹¤.</p>

<p><strong>home.html</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>

<span class="nt">&lt;html</span> <span class="na">xmlns:th=</span><span class="s">"http://www.thymeleaf.org"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Good Thymes Virtual Grocery<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;link</span>
      <span class="na">rel=</span><span class="s">"stylesheet"</span>
      <span class="na">type=</span><span class="s">"text/css"</span>
      <span class="na">media=</span><span class="s">"all"</span>
      <span class="na">href=</span><span class="s">"../../css/gtvg.css"</span>
      <span class="na">th:href=</span><span class="s">"@{/css/gtvg.css}"</span>
    <span class="nt">/&gt;</span>
  <span class="nt">&lt;/head&gt;</span>

  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">th:text=</span><span class="s">"#{home.welcome}"</span><span class="nt">&gt;</span>Welcome to our grocery store!<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ì´ì œ controllerë¥¼ êµ¬ì„±í•œë‹¤. íŒ¨í‚¤ì§€ì™€ ìë°” íŒŒì¼ì„ ìƒì„±í•œë‹¤.</p>

<p><img src="/images/Program/post-7/2021-02-22-17-36-14.png" alt="" /></p>

<p><br /></p>

<p><strong>HomeController</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">io.javabrains.coronavirustracker.controllers</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.ui.Model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeController</span> <span class="o">{</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">home</span><span class="o">(</span><span class="nc">Model</span> <span class="n">model</span><span class="o">){</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"testName:"</span><span class="o">,</span><span class="s">"TEST"</span><span class="o">);</span>
        <span class="k">return</span> <span class="s">"home"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<blockquote>
  <h5 id="9-getmappingë¥¼-í†µí•´ì„œ-í•´ë‹¹-urlë¡œ-ë¦¬í„´í•˜ëŠ”-htmlì—-ì ‘ì†í•˜ë„ë¡-í•œë‹¤">9: @GetMappingë¥¼ í†µí•´ì„œ í•´ë‹¹ urlë¡œ ë¦¬í„´í•˜ëŠ” htmlì— ì ‘ì†í•˜ë„ë¡ í•œë‹¤.<br /><br /></h5>

  <h5 id="10-model-í´ë˜ìŠ¤ë¥¼-ì´ìš©í•´ì„œ-ì ‘ì†í•˜ê³ ì-í•˜ëŠ”-htmlì—-modeaddattribute-ë©”ì†Œë“œë¥¼-ì´ìš©í•´ì„œ-ë°ì´í„°ë¥¼-ë³´ë‚´ì¤„-ìˆ˜-ìˆë‹¤">10: Model í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ì„œ ì ‘ì†í•˜ê³ ì í•˜ëŠ” htmlì— mode.addAttribute ë©”ì†Œë“œë¥¼ ì´ìš©í•´ì„œ ë°ì´í„°ë¥¼ ë³´ë‚´ì¤„ ìˆ˜ ìˆë‹¤.<br /><br /></h5>

  <h5 id="12-ë¦¬í„´í•˜ëŠ”-string-ë¬¸êµ¬ëŠ”-ì—°ê²°ë˜ëŠ”-html-ì´ë¦„ì´ë‹¤homehtml">12: ë¦¬í„´í•˜ëŠ” String ë¬¸êµ¬ëŠ” ì—°ê²°ë˜ëŠ” html ì´ë¦„ì´ë‹¤.(home.html)<br /></h5>
</blockquote>

<p>htmlë¥¼ ë‹¤ì‹œ ìˆ˜ì •í•˜ì. Thymeleafë¡œ addAttribute í–ˆë˜ ê°’ì„ ë°›ì•„ì˜¤ê¸° ìœ„í•´ì„œëŠ” ì´ë ‡ê²Œ ${} í˜•ì‹ì„ ì“´ë‹¤. ì¤‘ê´„í˜¸ ì•ˆì—ëŠ” attributeNameìœ¼ë¡œ ì„¤ì •í•´ì¤€ ë¬¸ìì—´ì„ ë„£ëŠ”ë‹¤.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>

<span class="nt">&lt;html</span> <span class="na">xmlns:th=</span><span class="s">"http://www.thymeleaf.org"</span><span class="nt">&gt;</span>

<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Coronavirus Tracker Application<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;p</span> <span class="na">th:text=</span><span class="s">"${testName}"</span><span class="nt">&gt;&lt;/p&gt;</span>

<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><br /></p>

<p>ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•´ì„œ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•´ë³¸ë‹¤.</p>

<p><img src="/images/Program/post-7/2021-02-22-17-47-57.png" alt="" /></p>

<p><br /></p>

<p>ë³¸ê²©ì ìœ¼ë¡œ allStats ê°ì²´ë¥¼ htmlë¡œ ë„˜ê¸°ëŠ” ì‘ì—…ì„ í•´ë³´ì. ì•ì— CoronaVirusDataService.javaì—ì„œ allStats ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” getAllStats ë©”ì†Œë“œë¥¼ ë§Œë“ ë‹¤.</p>

<p><strong>CoronaVirusDataService.java</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="o">(...)</span>
<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CoronaVirusDataService</span> <span class="o">{</span>

    <span class="o">(...)</span>

    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LocationStats</span><span class="o">&gt;</span> <span class="n">allStats</span><span class="o">=</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LocationStats</span><span class="o">&gt;</span> <span class="nf">getAllStats</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">allStats</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="o">(...)</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>
<p><br /></p>

<p>ê·¸ë¦¬ê³  controllerë¥¼ ìˆ˜ì •í•œë‹¤</p>

<p><strong>HomeController</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>
<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeController</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="nc">CoronaVirusDataService</span> <span class="n">coronaVirusDataService</span><span class="o">;</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">home</span><span class="o">(</span><span class="nc">Model</span> <span class="n">model</span><span class="o">){</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"locationStats"</span><span class="o">,</span><span class="n">coronaVirusDataService</span><span class="o">.</span><span class="na">getAllStats</span><span class="o">());</span>
        <span class="k">return</span> <span class="s">"home"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ htmlì—ì„œ loopingë¥¼ í†µí•´ì„œ ê° ë°ì´í„°ë¥¼ ë½‘ì•„ë‚´ëŠ” ë°©ë²•ì„ íƒ€ì„ë¦¬í”„ ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œ ì°¾ì•„ë³´ì.
iteration ì¹´í…Œê³ ë¦¬ ìª½ì„ ì‚´í´ë³´ë‹ˆ ì“¸ë§Œí•œ ì½”ë“œê°€ ë³´ì¸ë‹¤. ì—¬ê¸°ì„œ table íƒœê·¸ë¡œ ë‘˜ëŸ¬ìŒ“ì—¬ì§„ ë¶€ë¶„ì„ ë³µì‚¬í•´ì„œ ê°€ì ¸ì˜¤ì.</p>

<p><strong><a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#using-theach">Thymeleaf Document</a></strong></p>

<p><img src="/images/Program/post-7/2021-02-22-17-57-25.png" alt="" /></p>

<p><img src="/images/Program/post-7/2021-02-22-17-58-17.png" alt="" /></p>

<p><br /></p>

<p>ì•„ë˜ ì‚¬ì§„ì—ì„œ th:eachë¥¼ ì´ìš©í•´ì„œ ë°ì´í„°ë¥¼ ìˆœíšŒí•  ê²ƒì´ë‹¤. modelë¡œ ì„¤ì •í–ˆë˜ attributeë¥¼ ${locationStats}ë¡œ ë°›ê³  ë¦¬ìŠ¤íŠ¸ ë°°ì—´ë¡œ ë˜ì–´ ìˆëŠ” ì´ ê°ì²´ì—ì„œ í•œ ê°ì²´ì”© th:each=â€locationStatâ€ì˜ locatonStat ë³€ìˆ˜ë¡œ í•œ ìš”ì†Œì”© ë°›ì•„ì„œ ê·¸ ìš”ì†Œì˜ ë°ì´í„°ë¥¼ ê°ê° ì°ì–´ì£¼ëŠ” ì—­í• ì„ í•˜ê²Œ ë§Œë“ ë‹¤.</p>

<p><strong>home.html</strong></p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>

<span class="nt">&lt;html</span> <span class="na">xmlns:th=</span><span class="s">"http://www.thymeleaf.org"</span><span class="nt">&gt;</span>

<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Coronavirus Tracker Application<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;table&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;th&gt;</span>State<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th&gt;</span>Country<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th&gt;</span>Total cases reported<span class="nt">&lt;/th&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;tr</span> <span class="na">th:each=</span><span class="s">"locationStat : ${locationStats}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;td</span> <span class="na">th:text=</span><span class="s">"${locationStat.state}"</span><span class="nt">&gt;&lt;/td&gt;</span>
        <span class="nt">&lt;td</span> <span class="na">th:text=</span><span class="s">"${locationStat.country}"</span><span class="nt">&gt;&lt;/td&gt;</span>
        <span class="nt">&lt;td</span> <span class="na">th:text=</span><span class="s">"${locationStat.latestTotalCases}"</span><span class="nt">&gt;</span>0<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;/table&gt;</span>

<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ì´ì œ ë‹¤ì‹œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹œì‘í•´ë³´ì.</p>

<p><img src="../images/Program/post-7/2021-02-22-18-03-34.png" alt="" /></p>
:ET