I"Á*<p><br /><br /></p>

<h1 id="thymeleaf-inline-ì†ì„±ì—-ëŒ€í•´-ì•Œì•„ë³´ê¸°"><center>Thymeleaf-inline ì†ì„±ì— ëŒ€í•´ ì•Œì•„ë³´ê¸°</center></h1>

<p><br /><br /></p>

<p>ë¨¼ì € í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ ë³´ì.</p>

<p><img src="/images/SpringBoot/Thymeleaf/2021-03-01-16-59-05.png" alt="" /></p>

<p><br /></p>

<p>ì˜ì¡´ì„±ìœ¼ë¡œëŠ”</p>

<ul>
  <li>Thymeleaf</li>
  <li>Spring Boot DevTools</li>
  <li>Lombok</li>
  <li>Spring Web</li>
</ul>

<p>ì„ ì„¤ì •í•œë‹¤.</p>

<p><img src="/images/SpringBoot/Thymeleaf/2021-03-01-16-59-53.png" alt="" /></p>

<p><br /></p>

<p>í”„ë¡œì íŠ¸ê°€ ì™„ì„±ë˜ì—ˆìœ¼ë©´ applicaton.propertiesë¥¼ ì—´ê³  ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•´ ì¤€ë‹¤.</p>

<p>![]./images/SpringBoot/Thymeleaf/2021-03-01-17-01-49.png)</p>

<p><br /></p>

<p>ìœ„ ì„¤ì •ì€ Thymeleafë¥¼ ì´ìš©í•˜ëŠ” í”„ë¡œì íŠ¸ê°€ ë³€ê²½ í›„ì— ë§Œë“¤ì–´ì§„ ê²°ê³¼ë¥¼ ë³´ê´€(ìºì‹±)í•˜ì§€ ì•Šë„ë¡ ì„¤ì •í•˜ëŠ” ê²ƒì´ë‹¤.</p>

<p>ì´ì œ ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì´ íŒ¨í‚¤ì§€ì™€ ìë°” íŒŒì¼ì„ ìƒì„±í•œë‹¤. ê·¸ë¦¬ê³  ì½”ë“œë¥¼ ì ëŠ”ë‹¤.</p>

<p>exInline() ë©”ì†Œë“œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ RedirectAttributesë¥¼ ì´ìš©í•˜ì—¬ â€˜/ex3â€™ìœ¼ë¡œ resultì™€ dtoë¼ëŠ” ì´ë¦„ì˜ ë°ì´í„°ë¥¼ ì‹¬ì–´ì„œ ì „ë‹¬í•œë‹¤. resultëŠ” ë‹¨ìˆœí•œ ë¬¸ìì—´ì´ì§€ë§Œ, dtoëŠ” SampleDTOì˜ ê°ì²´ì´ë‹¤.</p>

<p><img src="/images/SpringBoot/Thymeleaf/2021-03-01-17-07-29.png" alt="" /></p>

<p><br /></p>

<p><strong>SampleDTO</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.thymeleafexample.dto</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.Builder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.LocalDateTime</span><span class="o">;</span>

<span class="nd">@Data</span>
<span class="nd">@Builder</span><span class="o">(</span><span class="n">toBuilder</span><span class="o">=</span><span class="kc">true</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleDTO</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">sno</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">first</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">last</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">LocalDateTime</span> <span class="n">regTime</span><span class="o">;</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>SampleController</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.zerock.ex3.controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.extern.log4j.Log4j2</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.ui.Model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.mvc.support.RedirectAttributes</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.zerock.ex3.dto.SampleDTO</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.time.LocalDateTime</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.Collectors</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.IntStream</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/sample"</span><span class="o">)</span>
<span class="nd">@Log4j2</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleController</span><span class="o">{</span>
    <span class="nd">@GetMapping</span><span class="o">({</span><span class="s">"/exInline"</span><span class="o">})</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">exInline</span><span class="o">(</span><span class="nc">RedirectAttributes</span> <span class="n">redirectAttributes</span><span class="o">){</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"exInline.............."</span><span class="o">);</span>

        <span class="nc">SampleDTO</span> <span class="n">dto</span><span class="o">=</span><span class="nc">SampleDTO</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">sno</span><span class="o">(</span><span class="mi">100L</span><span class="o">)</span>
                <span class="o">.</span><span class="na">first</span><span class="o">(</span><span class="s">"First..100"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">last</span><span class="o">(</span><span class="s">"Last..100"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">regTime</span><span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">())</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="n">redirectAttributes</span><span class="o">.</span><span class="na">addFlashAttribute</span><span class="o">(</span><span class="s">"result"</span><span class="o">,</span><span class="s">"success"</span><span class="o">);</span>
        <span class="n">redirectAttributes</span><span class="o">.</span><span class="na">addFlashAttribute</span><span class="o">(</span><span class="s">"dto"</span><span class="o">,</span><span class="n">dto</span><span class="o">);</span>

        <span class="k">return</span> <span class="s">"redirect:/sample/ex3"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/ex3"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">ex3</span><span class="o">(){</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"ex3"</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>ì‹¤ì œ í™”ë©´ì€ ex3.htmlë¡œ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ templates í´ë”ì— ì¶”ê°€í•œë‹¤.</p>

<p><img src="/images/SpringBoot/Thymeleaf/2021-03-01-17-08-50.png" alt="" /></p>

<p><br /></p>

<p><strong>ex3.html</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span> <span class="na">xmlns:th=</span><span class="s">"http://www.thymeleaf.org"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1</span> <span class="na">th:text=</span><span class="s">"${result}"</span><span class="nt">&gt;&lt;/h1&gt;</span>
    <span class="nt">&lt;h1</span> <span class="na">th:text=</span><span class="s">"${dto}"</span><span class="nt">&gt;&lt;/h1&gt;</span>
    <span class="nt">&lt;script </span><span class="na">th:inline=</span><span class="s">"javascript"</span><span class="nt">&gt;</span>

      <span class="kd">var</span> <span class="nx">msg</span><span class="o">=</span><span class="p">[[</span><span class="nx">$</span><span class="p">{</span><span class="nx">result</span><span class="p">}]]</span>
      <span class="kd">var</span> <span class="nx">dto</span><span class="o">=</span><span class="p">[[</span><span class="nx">$</span><span class="p">{</span><span class="nx">dto</span><span class="p">}]]</span>
    <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ex3.htmlì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„ì€ &lt;script&gt; íƒœê·¸ì— ì‚¬ìš©ëœ th:inline ì†ì„±ì´ë‹¤. ì†ì„±ê°’ì´ javascriptë¡œ ì§€ì •ë˜ì—ˆëŠ”ë° ì´ë¡œ ì¸í•´ ë§ì€ ë³€í™”ê°€ ìƒê²¨ë‚œë‹¤. ë¸Œë¼ìš°ì €ì—ì„œ ê²½ë¡œëŠ” <strong>â€˜/sample/exlineâ€™</strong>ìœ¼ë¡œ í˜¸ì¶œëœë‹¤.</p>

<p>ì´ì œ ì•±ì„ ì‹¤í–‰í•˜ê³  ë¸Œë¼ìš°ì €ë¥¼ í‚¨ë‹¤ìŒ F12ë¥¼ ëˆŒëŸ¬ í•´ë‹¹ urlë¡œ ë“¤ì–´ê°€ë³¸ë‹¤.</p>

<p><em>ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì´ ë³„ë„ì˜ ì²˜ë¦¬ê°€ ì—†ìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ë¬¸ìì—´ì€ ìë™ìœ¼ë¡œ â€œâ€œì´ ì¶”ê°€ë˜ì–´ ë¬¸ìì—´ì´ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆê³  ê°™ì´ ì „ì†¡ëœ dtoëŠ” JSON í¬ë§·ì˜ ë¬¸ìì—´ì´ ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</em></p>

<p>ë§Œì¼ ìœ„ì˜ ì½”ë“œë¥¼ javaScript ê°ì²´ë¡œ ë³€í™˜í•´ì„œ ì‚¬ìš©í•˜ê³ ì í•œë‹¤ë©´ ê°„ë‹¨íˆ JSON.parse(â€˜"â€˜+dto+â€™'â€); ì™€ ê°™ì€ í˜•íƒœë¡œ â€œâ€œì„ ì¶”ê°€í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<p><img src="/images/SpringBoot/Thymeleaf/2021-03-01-17-13-52.png" alt="" /></p>

<p><br /></p>

<p>ê·¸ë¦¬ê³  ì¶”ê°€ì ìœ¼ë¡œ script íƒœê·¸ì— th:inline=â€javascriptâ€ ì†ì„±ì„ ì •ì˜í•˜ë©´ ê·¸ ì•ˆì— í¬í•¨ëœ ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” [[..]] í‘œí˜„ì‹ìœ¼ë¡œ ì„œë²„ ë°ì´í„°ë¥¼ ìŠ¤í¬ë¦½íŠ¸ ì˜ì—­ì— í‘œí˜„í•  ìˆ˜ ìˆë‹¤.</p>
:ET