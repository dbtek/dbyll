I"{•<p><br /><br /></p>

<h1 id="ì„œë¹„ìŠ¤-ê³„ì¸µê³¼-dto"><center>ì„œë¹„ìŠ¤ ê³„ì¸µê³¼ DTO</center></h1>

<p><br /></p>

<p><em>í•´ë‹¹ ë‚´ìš©ì€ ì±… â€˜ì½”ë“œë¡œ ë°°ìš°ëŠ” ìŠ¤í”„ë§ë¶€íŠ¸ ì›¹ í”„ë¡œì íŠ¸â€™ì˜ ë‚´ìš©ì´ë©° ì´ ê²Œì‹œë¬¼ì€ ê·¸ ì±…ì„ ê°œì¸ì ìœ¼ë¡œ ê³µë¶€í•˜ë©° ë©”ëª¨í•´ ë‘ê¸° ìœ„í•´ì„œ ì“°ëŠ” ê²ƒì„ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤</em></p>

<p><br /><br /></p>

<p>ì‹¤ì œ í”„ë¡œì íŠ¸ë¥¼ ì‘ì„±í•  ê²½ìš°ì— ì—”í‹°í‹° ê°ì²´ë¥¼ ì˜ì† ê³„ì¸µ ë°”ê¹¥ìª½ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ ë³´ë‹¤ëŠ” DTO(Data Transfer Object)ë¥¼ ì´ìš©í•˜ëŠ” ë°©ì‹ì„ ê¶Œí•œë‹¤.</p>

<p>DTOëŠ” ì—”í‹°í‹° ê°ì²´ì™€ ë‹¬ë¦¬ ê° ê³„ì¸µë¼ë¦¬ ì£¼ê³ ë°›ëŠ” ìš°í¸ë¬¼ì´ë‚˜ ìƒìì˜ ê°œë…ì´ë‹¤. ìˆœìˆ˜í•˜ê²Œ ë°ì´í„°ë¥¼ ë‹´ê³  ìˆë‹¤ëŠ” ì ì—ì„œëŠ” ì—”í‹°í‹° ê°ì²´ì™€ ìœ ì‚¬í•˜ì§€ë§Œ, ëª©ì  ìì²´ê°€ ë°ì´í„°ì˜ ì „ë‹¬ì´ë¯€ë¡œ ì½ê³ , ì“°ëŠ” ê²ƒì´ ëª¨ë‘ í—ˆìš©ë˜ëŠ” ì ì´ ê°€ëŠ¥í•˜ê³  ì¼íšŒì„±ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì„±ê²©ì´ ê°•í•˜ë‹¤.</p>

<p>ìš°ë¦¬ëŠ” ì´ì œ ì„œë¹„ìŠ¤ ê³„ì¸µì„ ìƒì„±í•˜ê³  ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œëŠ” DTOë¡œ íŒŒë¼ë¯¸í„°ì™€ ë¦¬í„´ íƒ€ì…ì„ ì²˜ë¦¬í•˜ë„ë¡ êµ¬ì„±í•  ê²ƒì´ë‹¤. DTOë¥¼ ì‚¬ìš©í•˜ë©´ ì—”í‹°í‹° ê°ì²´ì˜ ë²”ìœ„ë¥¼ í•œì • ì§€ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì¢€ ë” ì•ˆì „í•œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆê³  í™”ë©´ê³¼ ë°ì´í„°ë¥¼ ë¶„ë¦¬í•˜ë ¤ëŠ” ì·¨ì§€ì—ë„ ì¢€ ë” ë¶€í•©í•œë‹¤. DTOë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ê°€ì¥ í° ë‹¨ì ì€ Entityì™€ ìœ ì‚¬í•œ ì½”ë“œë¥¼ ì¤‘ë³µìœ¼ë¡œ ê°œë°œí•œë‹¤ëŠ” ì ê³¼, ì—”í‹°í‹° ê°ì²´ë¥¼ DTOë¡œ ë³€í™˜í•˜ê±°ë‚˜ ë°˜ëŒ€ë¡œ DTOê°ì²´ë¥¼ ì—”í‹°í‹°ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.</p>

<p>ì•„ë˜ì™€ ê°™ì´ íŒ¨í‚¤ì§€ì™€ íŒŒì¼ì„ ìƒì„±í•œë‹¤.</p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part2/Chapter4/2021-03-03-14-42-46.png" alt="" /></p>

<p><br /></p>

<p><strong>GuestbookDTO.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.guestbook.dto</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Builder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.time.LocalDateTime</span><span class="o">;</span>

<span class="nd">@Builder</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GuestbookDTO</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">gno</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">title</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">writer</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">LocalDateTime</span> <span class="n">regDate</span><span class="o">,</span> <span class="n">modDate</span><span class="o">;</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>GuestbookDTOëŠ” ì—”í‹°í‹° í´ë˜ìŠ¤ì¸ Guestbookê³¼ ê±°ì˜ ë™ì¼í•œ í•„ë“œë“¤ì„ ê°€ì§€ê³  ìˆê³  getter/setterë¥¼ í†µí•´ ììœ ë¡­ê²Œ ê°’ì€ ë³€ê²½í•  ìˆ˜ ìˆê²Œ êµ¬ì„±í•œë‹¤. ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œëŠ” GuestbookDTOë¥¼ ì´ìš©í•´ì„œ í•„ìš”í•œ ë‚´ìš©ì„ ì „ë‹¬ë°›ê³ , ë°˜í™˜í•˜ë„ë¡ ì²˜ë¦¬í•˜ëŠ”ë° Guestbook Service ì¸í„°í˜ì´ìŠ¤ì™€ GuestbookServiceImpl í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•œë‹¤.</p>

<p><strong>GuestbookService interface</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.guestbook.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.techlead.guestbook.dto.GuestbookDTO</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GuestbookService</span> <span class="o">{</span>
    <span class="nc">Long</span> <span class="nf">register</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p><strong>GuestbookServiceImpl.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.guestbook.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.extern.log4j.Log4j2</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.techlead.guestbook.dto.GuestbookDTO</span><span class="o">;</span>

<span class="nd">@Service</span>
<span class="nd">@Log4j2</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GuestbookServiceImpl</span> <span class="kd">implements</span> <span class="nc">GuestbookService</span><span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">register</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>GuesbookServiceImpl í´ë˜ìŠ¤ì—ëŠ” ìŠ¤í”„ë§ì—ì„œ ë¹ˆìœ¼ë¡œ ì²˜ë¦¬ë˜ë¡ @Service ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì£¼ëŠ” ê²ƒì„ ìŠì§€ ë§ì.</p>

<p>ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œëŠ” íŒŒë¼ë¯¸í„°ë¥¼ DTO íƒ€ì…ìœ¼ë¡œ ë°›ê¸° ë•Œë¬¸ì— ì´ë¥¼ JPAë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ” ì—”í‹°í‹° íƒ€ì…ì˜ ê°ì²´ë¡œ ë³€í™˜í•´ì•¼ í•˜ëŠ” ì‘ì—…ì´ ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤. ì´ ê¸°ëŠ¥ì„ DTO í´ë˜ìŠ¤ì— ì ìš©í•˜ê±°ë‚˜ ModelMapper ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ MapStruct ë“±ì„ ì´ìš©í•˜ê¸°ë„ í•˜ëŠ”ë° ì´ ì±…ì˜ ì˜ˆì œì—ì„œëŠ” ì§ì ‘ ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ì„±í•œë‹¤.</p>

<p>ì´ë¯¸ ì±…ì€ ì§ì ‘ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í–ˆìœ¼ë¯€ë¡œ ìš°ë¦¬ëŠ” ModelMapperë¥¼ ì‚¬ìš©í•´ì„œ êµ¬ì„±ì„ í•´ë³´ê³  ì±…ê³¼ ë¹„êµë¥¼ í†µí•´ ModelMapperì˜ í¸ë¦¬ì„±ì„ ëŠê»´ë³¸ë‹¤.</p>

<p>ModelMapper ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì¼ë‹¨ build.gradleì— ì½”ë“œë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤.</p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part2/Chapter4/2021-03-03-15-13-38.png" alt="" /></p>

<p><br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>compile group: 'org.modelmapper', name: 'modelmapper', version: '2.3.0'
</pre></td></tr></tbody></table></code></pre></div></div>

<p>í•œì¤„ì„ ì¶”ê°€í•´ì¤€ë‹¤. ê·¸ë¦¬ê³  GuestbookService ì¸í„°í˜ì´ìŠ¤ì— ì½”ë“œë¥¼ ì¶”ê°€í•˜ì</p>

<p><strong>GuestbookService ì¸í„°í˜ì´ìŠ¤</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.guestbook.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.modelmapper.ModelMapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.techlead.guestbook.dto.GuestbookDTO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.techlead.guestbook.entity.Guestbook</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GuestbookService</span> <span class="o">{</span>
    <span class="nc">Long</span> <span class="nf">register</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">);</span>
    <span class="k">default</span> <span class="nc">Guestbook</span> <span class="nf">dtoToEntity</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">){</span>
        <span class="nc">ModelMapper</span> <span class="n">modelMapper</span><span class="o">=</span><span class="k">new</span> <span class="nc">ModelMapper</span><span class="o">();</span>
        <span class="nc">Guestbook</span> <span class="n">entity</span><span class="o">=</span><span class="n">modelMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">dto</span><span class="o">,</span><span class="nc">Guestbook</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">entity</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>GuestbookServiceì—ëŠ” ì¸í„°í˜ì´ìŠ¤ ë‚´ì— default ê¸°ëŠ¥ì„ í™œìš©í•´ì„œ êµ¬í˜„í´ë˜ìŠ¤ì—ì„œ ë™ì‘í•  ìˆ˜ ìˆëŠ” dtoToEntity()ë¥¼ êµ¬ì„±í•œë‹¤. ì±…ì—ì„œëŠ” ì§ì ‘ êµ¬í˜„í–ˆì§€ë§Œ ìš°ë¦¬ëŠ” ModelMapperë¥¼ ì‚¬ìš©í–ˆë‹¤. ì±…ì—ì„œ ë‚˜ì˜¨ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤</p>

<p><strong>GuestbookService ì¸í„°í˜ì´ìŠ¤ ì±…ì— ìˆëŠ” ì½”ë“œ</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="o">(...)</span>
    <span class="k">default</span> <span class="nc">Guestbook</span> <span class="nf">dtoToEntity</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">){</span>
        <span class="nc">Guestbook</span> <span class="n">entity</span><span class="o">=</span><span class="nc">Guestbook</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">gno</span><span class="o">(</span><span class="n">dto</span><span class="o">.</span><span class="na">getGno</span><span class="o">())</span>
                <span class="o">.</span><span class="na">title</span><span class="o">(</span><span class="n">dto</span><span class="o">.</span><span class="na">getTitle</span><span class="o">())</span>
                <span class="o">.</span><span class="na">content</span><span class="o">(</span><span class="n">dto</span><span class="o">.</span><span class="na">getContent</span><span class="o">())</span>
                <span class="o">.</span><span class="na">writer</span><span class="o">(</span><span class="n">dto</span><span class="o">.</span><span class="na">getWriter</span><span class="o">())</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">entity</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">(...)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ë³´ì‹œë‹¤ì‹œí”¼ ModelMapperë¥¼ ì´ìš©í•˜ë©´ ë” ì§§ì€ ì¤„ë¡œ ê°™ì€ ë¡œì§ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì§€ê¸ˆì€ ì—”í‹°í‹°ê°€ ì ì–´ì„œ ì–¼ë§ˆ ì°¨ì´ê°€ ì•ˆë‚ ì§€ ëª¨ë¥´ì§€ë§Œ ì—”í‹°í‹° ê°œìˆ˜ê°€ ë§ì•„ì§€ë©´ ë§ì•„ì§ˆ ìˆ˜ë¡ ModelMapperë¥¼ ì‚¬ìš©í•˜ë©´ ë§¤ìš° í¸ë¦¬í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ì´ì œ GuestbookServiceImpl í´ë˜ìŠ¤ì—ì„œ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ ë³¸ë‹¤. GuestbookServiceImpl í´ë˜ìŠ¤ì—ì„œëŠ” ì´ë¥¼ í™œìš©í•´ì„œ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ëŠ” GuestbookDTOë¥¼ ë³€í™˜í•´ ë³´ë„ë¡ í•œë‹¤.</p>

<p><strong>GuestbookServiceImpl í´ë˜ìŠ¤</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="o">(...)</span>
<span class="nd">@Service</span>
<span class="nd">@Log4j2</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GuestbookServiceImpl</span> <span class="kd">implements</span> <span class="nc">GuestbookService</span><span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">register</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"DTO--------------------"</span><span class="o">);</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">dto</span><span class="o">);</span>

        <span class="nc">Guestbook</span> <span class="n">entity</span><span class="o">=</span><span class="n">dtoToEntity</span><span class="o">(</span><span class="n">dto</span><span class="o">);</span>

        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">entity</span><span class="o">);</span>

        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ì´ì œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ ë³¸ë‹¤. test í´ë”ì— service íŒ¨í‚¤ì§€ë¥¼ ì¶”ê°€í•˜ê³  ì•„ë˜ì˜ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.</p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part2/Chapter4/2021-03-03-15-27-41.png" alt="" /></p>

<p><br /></p>

<p><strong>GuestbookServiceTests</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.guestbook.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.techlead.guestbook.dto.GuestbookDTO</span><span class="o">;</span>

<span class="nd">@SpringBootTest</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GuestbookServiceTests</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">GuestbookService</span> <span class="n">service</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testRegister</span><span class="o">(){</span>
        <span class="nc">GuestbookDTO</span> <span class="n">guestbookDTO</span><span class="o">=</span> <span class="nc">GuestbookDTO</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">title</span><span class="o">(</span><span class="s">"Sample Title..."</span><span class="o">)</span>
                <span class="o">.</span><span class="na">content</span><span class="o">(</span><span class="s">"Sample Content..."</span><span class="o">)</span>
                <span class="o">.</span><span class="na">writer</span><span class="o">(</span><span class="s">"user0"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">service</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">guestbookDTO</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part2/Chapter4/2021-03-03-15-29-28.png" alt="" /></p>

<p><br /></p>

<p>ë³€í™˜ ì‘ì—…ì— ë¬¸ì œê°€ ì—†ë‹¤ëŠ” ê²ƒì„ í™•ì¸í–ˆìœ¼ë¯€ë¡œ ì‹¤ì œë¡œ ë°ì´í„° ë² ì´ìŠ¤ì— ì²˜ë¦¬ê°€ ì™„ë£Œë˜ë„ë¡ í•œë‹¤.</p>

<p><strong>GuestbookServiceImpl.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="nd">@Service</span>
<span class="nd">@Log4j2</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GuestbookServiceImpl</span> <span class="kd">implements</span> <span class="nc">GuestbookService</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">GuestbookRepository</span> <span class="n">repository</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">register</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"DTO------------------------"</span><span class="o">);</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">dto</span><span class="o">);</span>

        <span class="nc">Guestbook</span> <span class="n">entity</span> <span class="o">=</span> <span class="n">dtoToEntity</span><span class="o">(</span><span class="n">dto</span><span class="o">);</span>

        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">entity</span><span class="o">);</span>

        <span class="n">repository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">entity</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">entity</span><span class="o">.</span><span class="na">getGno</span><span class="o">();</span>
    <span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>GuestbookServiceImpl í´ë˜ìŠ¤ëŠ” JPA ì²˜ë¦¬ë¥¼ ìœ„í•´ì„œ GuestbookRepositoryë¥¼ ì£¼ì…í•˜ê³  í´ë˜ìŠ¤ ì„ ì–¸ ì‹œì— <strong>@RequiredArgsConstructor</strong>ë¥¼ ì´ìš©í•´ì„œ ìë™ìœ¼ë¡œ ì£¼ì…í•œë‹¤. register()ì˜ ë‚´ë¶€ì—ì„œëŠ” save()ë¥¼ í†µí•´ì„œ ì €ì¥í•˜ê³  ì €ì¥ëœ í›„ì— í•´ë‹¹ ì—”í‹°í‹°ê°€ ê°€ì§€ëŠ” gno ê°’ì„ ë°˜í™˜í•œë‹¤.</p>

<p>ì´ì œ ëª©ë¡ì„ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•  ì°¨ë¡€ë‹¤.</p>

<p>ëª©ë¡ì„ ì²˜ë¦¬í•˜ëŠ” ì‘ì—…ì€ ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì„ ê³ ë ¤í•œë‹¤.</p>

<ul>
  <li>í™”ë©´ì—ì„œ í•„ìš”í•œ ëª©ë¡ ë°ì´í„°ì— ëŒ€í•œ DTO ìƒì„±</li>
  <li>DTOë¥¼ Pageable íƒ€ì…ìœ¼ë¡œ ì „í™˜</li>
  <li>Page<Entity>ë¥¼ í™”ë©´ì—ì„œ ì‚¬ìš©í•˜ê¸° ì‰¬ìš´ DTOì˜ ë¦¬ìŠ¤íŠ¸ ë“±ìœ¼ë¡œ ë³€í™˜</Entity></li>
  <li>í™”ë©´ì— í•„ìš”í•œ í˜ì´ì§€ ë²ˆí˜¸ ì²˜ë¦¬</li>
</ul>

<p><br /></p>

<p>ì¼ë‹¨ ê²°ê³¼ í™”ë©´ì˜ êµ¬ì„±ì„ ë³´ì.</p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part2/Chapter4/2021-03-03-15-37-39.png" alt="" /></p>

<p><br /></p>

<p>ëª©ë¡ì„ ì²˜ë¦¬í•˜ëŠ” ì‘ì—…ì€ ë‚˜ì¤‘ì— ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•œ êµ¬ì¡°ë¡œ ìƒì„±í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ëª¨ë“  ëª©ë¡ì„ ì²˜ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì—ëŠ” í˜ì´ì§€ ë²ˆí˜¸ë‚˜ í•œ í˜ì´ì§€ë‹¹ ëª‡ ê°œë‚˜ ì¶œë ¥ë  ê²ƒì¸ê°€ì™€ ê°™ì€ ê³µí†µì ì¸ ë¶€ë¶„ì´ ë§ê¸° ë•Œë¬¸ì— ì´ë¥¼ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ë©´ ì•ìœ¼ë¡œ ë§Œë“œëŠ” ì—¬ëŸ¬ ì˜ˆì œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>ì‘ì„±í•˜ë ¤ê³  í•˜ëŠ” PageRequestDTOëŠ” ëª©ë¡ í˜ì´ì§€ë¥¼ ìš”ì²­í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ë¥¼ ì¬ì‚¬ìš©í•˜ê¸° ì‰½ê²Œ ë§Œë“œëŠ” í´ë˜ìŠ¤ì´ë‹¤. ëª©ë¡ í™”ë©´ì—ì„œëŠ” í˜ì´ì§€ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ì´ ìˆê¸° ë•Œë¬¸ì— â€˜í˜ì´ì§€ ë²ˆí˜¸â€™ë‚˜ â€˜í˜ì´ì§€ ë‚´ ëª©ë¡ì˜ ê°œìˆ˜, ê²€ìƒ‰ ì¡°ê±´â€™ë“¤ì´ ë§ì´ ì‚¬ìš©ëœë‹¤. PageRequestDTOëŠ” ì´ëŸ¬í•œ íŒŒë¼ë¯¸í„°ë¥¼ DTOë¡œ ì„ ì–¸í•˜ê³  ë‚˜ì¤‘ì— ì¬ì‚¬ìš©í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤.</p>

<p>í™”ë©´ì—ì„œ ì „ë‹¬ë˜ëŠ” ëª©ë¡ ê´€ë ¨ëœ ë°ì´í„°ì— ëŒ€í•œ DTOë¥¼ PageRequestDTOë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ìƒì„±í•˜ê³ , í™”ë©´ì—ì„œ í•„ìš”í•œ ê²°ê³¼ëŠ” PageResultDTOë¼ëŠ” ì´ë¦„ì˜ í´ë˜ìŠ¤ë¡œ ìƒì„±í•œë‹¤.</p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part2/Chapter4/2021-03-03-15-45-09.png" alt="" /></p>

<p><br /></p>

<p><strong>PageRequestDTO.java</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.guestbook.dto</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Builder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.PageRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Pageable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Sort</span><span class="o">;</span>

<span class="nd">@Builder</span>
<span class="nd">@AllArgsConstructor</span>
<span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PageRequestDTO</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">page</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">type</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">keyword</span><span class="o">;</span>


    <span class="kd">public</span> <span class="nf">PageRequestDTO</span><span class="o">(){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">page</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">size</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Pageable</span> <span class="nf">getPageable</span><span class="o">(</span><span class="nc">Sort</span> <span class="n">sort</span><span class="o">){</span>

        <span class="k">return</span> <span class="nc">PageRequest</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">page</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">size</span><span class="o">,</span> <span class="n">sort</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>PageRequestDTOëŠ” í™”ë©´ì—ì„œ ì „ë‹¬ë˜ëŠ” pageë¼ëŠ” íŒŒë¼ë¯¸í„°ì™€ sizeë¼ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ë‹¤ë§Œ í˜ì´ì§€ ë²ˆí˜¸ ë“±ì€ ê¸°ë³¸ê°’ì„ ê°€ì§€ëŠ” ê²ƒì´ ì¢‹ê¸° ë•Œë¬¸ì— 1ê³¼ 10ì´ë¼ëŠ” ê°’ì„ ì´ìš©í•œë‹¤. PageRequestDTOì˜ ì§„ì§œ ëª©ì ì€ JPA ìª½ì—ì„œ ì‚¬ìš©í•˜ëŠ” Pageable íƒ€ì…ì˜ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ë‹¤. ë‚˜ì¤‘ì— ìˆ˜ì •ì˜ ì—¬ì§€ê°€ ìˆê¸°ëŠ” í•˜ì§€ë§Œ JPAë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” í˜ì´ì§€ ë²ˆí˜¸ê°€ 0ë¶€í„° ì‹œì‘í•œë‹¤ëŠ” ì ì„ ê°ì•ˆí•´ì„œ 1í˜ì´ì§€ì˜ ê²½ìš° 0ì´ ë  ìˆ˜ ìˆë„ë¡ page-1ì„ í•˜ëŠ” í˜•íƒœë¡œ ì‘ì„±í•œë‹¤. ì •ë ¬ì€ ë‚˜ì¤‘ì— ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ ì“°ê¸° ìœ„í•´ì„œ ë³„ë„ì˜ íŒŒë¼ë¯¸í„°ë¡œ ë°›ë„ë¡ ì„¤ê³„í•œë‹¤.</p>

<p><br /></p>

<p>JPAë¥¼ ì´ìš©í•˜ëŠ” Repositoryì—ì„œëŠ” í˜ì´ì§€ ì²˜ë¦¬ ê²°ê³¼ë¥¼ Page<Entity> íƒ€ì…ìœ¼ë¡œ ë°˜í™˜í•˜ê²Œ ëœë‹¤. ë”°ë¼ì„œ ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œ ì´ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œë„ ë³„ë„ì˜ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ì²˜ë¦¬í•´ì•¼ í•œë‹¤. ì²˜ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ëŠ” í¬ê²Œ ë‹¤ìŒê³¼ ê°™ë‹¤</Entity></p>

<ul>
  <li>Page<Entity>ì˜ ì—”í‹°í‹° ê°ì²´ë“¤ì„ DTO ê°ì²´ë¡œ ë³€í™˜í•´ì„œ ìë£Œêµ¬ì¡°ë¡œ ë‹´ì•„ ì£¼ì–´ì•¼ í•œë‹¤.</Entity></li>
  <li>í™”ë©´ ì¶œë ¥ì— í•„ìš”í•œ í˜ì´ì§€ ì •ë³´ë“¤ì„ êµ¬ì„±í•´ ì£¼ì–´ì•¼ í•œë‹¤.</li>
</ul>

<p><br /></p>

<p>ì´ëŸ¬í•œ ì‘ì—…ì„ ìœ„í•´ì„œ PageResultDTOëŠ” ì„ì‹œë¡œ ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ êµ¬ì„±í•œë‹¤.</p>

<p><strong>PageResultDTO.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.zerock.guestbook.dto</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Pageable</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.stream.Collectors</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.function.Function</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.IntStream</span><span class="o">;</span>

<span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PageResultDTO</span><span class="o">&lt;</span><span class="no">DTO</span><span class="o">,</span> <span class="no">EN</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="no">DTO</span><span class="o">&gt;</span> <span class="n">dtoList</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">PageResultDTO</span><span class="o">(</span><span class="nc">Page</span><span class="o">&lt;</span><span class="no">EN</span><span class="o">&gt;</span> <span class="n">result</span><span class="o">,</span> <span class="nc">Function</span><span class="o">&lt;</span><span class="no">EN</span><span class="o">,</span><span class="no">DTO</span><span class="o">&gt;</span> <span class="n">fn</span><span class="o">){</span>
        <span class="n">dtoList</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">map</span><span class="o">(</span><span class="n">fn</span><span class="o">).</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>PageResultDTO í´ë˜ìŠ¤ëŠ” ë‹¤ì–‘í•œ ê³³ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì œë„¤ë¦­ íƒ€ì…ì„ ì´ìš©í•´ì„œ DTOì™€ ENì´ë¼ëŠ” íƒ€ì…ì„ ì§€ì •í•œë‹¤. ë§ ê·¸ëŒ€ë¡œ DTOì™€ Entity íƒ€ì…ì„ ì˜ë¯¸í•œë‹¤. PageResultDTOëŠ” Page<Entity> íƒ€ì…ì„ ì´ìš©í•´ì„œ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ìƒì„±ìë¡œ ì‘ì„±í•œë‹¤. ì´ë•Œ íŠ¹ë³„í•œ Function&lt;EN,DTO&gt;ëŠ” ì—”í‹°í‹° ê°ì²´ë“¤ì„ DTOë¡œ ë³€í™˜í•´ ì£¼ëŠ” ê¸°ëŠ¥ì´ë‹¤.</Entity></p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part2/Chapter4/2021-03-03-15-57-25.png" alt="" /></p>

<p><br /></p>

<p>ìœ„ì™€ ê°™ì€ êµ¬ì¡°ëŠ” ë‚˜ì¤‘ì— ì–´ë–¤ ì¢…ë¥˜ì˜ Page<E> íƒ€ì…ì´ ìƒì„±ë˜ë”ë¼ë„, PageResultDTOë¥¼ ì´ìš©í•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.</E></p>

<p>ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œëŠ” PageReuqestDTOë¥¼ íŒŒë¼ë¯¸í„°ë¡œ, PageResultDTOë¥¼ ë¦¬í„´ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” getList()ë¥¼ ì„¤ê³„í•˜ê³  ì—”í‹°í‹° ê°ì²´ë¥¼ DTO ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” entityToDto()ë¥¼ ì •ì˜í•œë‹¤.</p>

<p><strong>GuestbookService ì¸í„°í˜ì´ìŠ¤</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.techlead.guestbook.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.modelmapper.ModelMapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.techlead.guestbook.dto.GuestbookDTO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.techlead.guestbook.dto.PageRequestDTO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.techlead.guestbook.dto.PageResultDTO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.techlead.guestbook.entity.Guestbook</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GuestbookService</span> <span class="o">{</span>
    <span class="nc">Long</span> <span class="nf">register</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">);</span>
    <span class="nc">PageResultDTO</span><span class="o">&lt;</span><span class="nc">GuestbookDTO</span><span class="o">,</span> <span class="nc">Guestbook</span><span class="o">&gt;</span> <span class="nf">getList</span><span class="o">(</span><span class="nc">PageRequestDTO</span> <span class="n">requestDTO</span><span class="o">);</span>
    
    
    <span class="k">default</span> <span class="nc">Guestbook</span> <span class="nf">dtoToEntity</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">){</span>
        <span class="nc">ModelMapper</span> <span class="n">modelMapper</span><span class="o">=</span><span class="k">new</span> <span class="nc">ModelMapper</span><span class="o">();</span>
        <span class="nc">Guestbook</span> <span class="n">entity</span><span class="o">=</span><span class="n">modelMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">dto</span><span class="o">,</span><span class="nc">Guestbook</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">entity</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="k">default</span> <span class="nc">GuestbookDTO</span> <span class="nf">entityToDto</span><span class="o">(</span><span class="nc">Guestbook</span> <span class="n">entity</span><span class="o">){</span>
        <span class="nc">ModelMapper</span> <span class="n">modelMapper</span><span class="o">=</span><span class="k">new</span> <span class="nc">ModelMapper</span><span class="o">();</span>
        <span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">=</span><span class="n">modelMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">entity</span><span class="o">,</span><span class="nc">GuestbookDTO</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">dto</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>entityToDto ë©”ì„œë“œëŠ” dtoToEntity ë©”ì„œë“œì™€ ê°™ì´ ModelMapperë¥¼ ì‚¬ìš©í•œë‹¤. GuestbookServiceImpl í´ë˜ìŠ¤ì—ì„œëŠ” ì¶”ê°€ëœ getList()ë¥¼ ì•„ë˜ì™€ ê°™ì´ êµ¬í˜„í•œë‹¤.</p>

<p><strong>GuestbookServiceImpl.java</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="rouge-code"><pre><span class="o">(...)</span>
<span class="nd">@Service</span>
<span class="nd">@Log4j2</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GuestbookServiceImpl</span> <span class="kd">implements</span> <span class="nc">GuestbookService</span><span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">GuestbookRepository</span> <span class="n">repository</span><span class="o">;</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">register</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"DTO--------------------"</span><span class="o">);</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">dto</span><span class="o">);</span>

        <span class="nc">Guestbook</span> <span class="n">entity</span><span class="o">=</span><span class="n">dtoToEntity</span><span class="o">(</span><span class="n">dto</span><span class="o">);</span>

        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">entity</span><span class="o">);</span>

        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">PageResultDTO</span><span class="o">&lt;</span><span class="nc">GuestbookDTO</span><span class="o">,</span> <span class="nc">Guestbook</span><span class="o">&gt;</span> <span class="nf">getList</span><span class="o">(</span><span class="nc">PageRequestDTO</span> <span class="n">requestDTO</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">Pageable</span> <span class="n">pageable</span> <span class="o">=</span> <span class="n">requestDTO</span><span class="o">.</span><span class="na">getPageable</span><span class="o">(</span><span class="nc">Sort</span><span class="o">.</span><span class="na">by</span><span class="o">(</span><span class="s">"gno"</span><span class="o">).</span><span class="na">descending</span><span class="o">());</span>

        <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">Guestbook</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">pageable</span><span class="o">);</span>

        <span class="nc">Function</span><span class="o">&lt;</span><span class="nc">Guestbook</span><span class="o">,</span> <span class="nc">GuestbookDTO</span><span class="o">&gt;</span> <span class="n">fn</span> <span class="o">=</span> <span class="o">(</span><span class="n">entity</span> <span class="o">-&gt;</span> <span class="n">entityToDto</span><span class="o">(</span><span class="n">entity</span><span class="o">));</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nc">PageResultDTO</span><span class="o">&lt;&gt;(</span><span class="n">result</span><span class="o">,</span> <span class="n">fn</span> <span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>getList()ì—ì„œ ëˆˆì—¬ê²¨ ë³¼ ë¶€ë¶„ì€ entityToDTO()ë¥¼ ì´ìš©í•´ì„œ java.util.Functionì„ ìƒì„±í•˜ê³  ì´ë¥¼ PageResultDTOë¡œ êµ¬ì„±í•˜ëŠ” ë¶€ë¶„ì´ë‹¤.</p>
:ET