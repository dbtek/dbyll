---
layout: post
title: Spring Test - MockMvcTest  
categories: [Spring, Testing]
fullview: false
---

Introduction to @MockMvcTest

Spring offers few different options to test our web layer. These can be combined under two testing strategy. Integration testing 
and unit testing. Both have their own advantages and profits. Integration tests are useful to test your applications business logic
as much as similar to production environment. But because they need application context up, they are heavyweight and not so practical.
Unit testing easy to create, practical and lightweight. No need to application context but hard to maintain because you need mock and
stubs classes. Also real profit of unit testing is not just test your units. It is a good indicator of how's your design. If it is hard
to write a test for a class/method, then it means you have wrong dependencies, complex methods or objects.

Today I will give an example to web layer testing which is a bit middle point for integration and unit testing. It is not required appliaction 
context and needs some mocks so similar to unit tests(and actually it is under unit testing) but also test web layer serialization(Jackson mappers),
http status codes(validations) so a bit similar to integration tests in that perspective.    

Configuration

Before start to write your tests for your controllers, need some configurations for  @MockMvcTest. Let's have a look the below basic gradle.build
file;

```gradle 
/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.6/userguide/tutorial_java_projects.html
 */
plugins {
    id "org.springframework.boot" version "2.1.3.RELEASE"
}

apply plugin: 'idea'
apply plugin: 'java'
apply plugin: 'io.spring.dependency-management'

ext {
    springBootVersion = '2.1.3.RELEASE'
}
// In this section you declare where to find the dependencies of your project
repositories {
    mavenCentral()
}

bootJar {
    mainClassName = 'com.softwarelabs.App'
    baseName = 'spring-boot-integration-test'
    version = '0.1.0'
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

dependencies {
    compile("org.springframework.boot:spring-boot-starter-web")
    compile('org.apache.commons:commons-lang3:3.8.1')
    compileOnly('org.projectlombok:lombok')

    testCompile("org.springframework.boot:spring-boot-starter-test")
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.6'
}
```
For @MockMvcTest we just need to add ```testCompile("org.springframework.boot:spring-boot-starter-test")``` to our gradle file. Other configurations are to create a basic web
project on spring boot. 

How to write a mockMvc test

Now 

Test @PostMapping

Test @GetMapping

Notes

Result
